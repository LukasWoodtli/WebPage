{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/blog/object_databases",
    "result": {"data":{"site":{"siteMetadata":{"title":"My personal Website"}},"markdownRemark":{"id":"77c93834-4632-5f26-a1a6-561bf78d3c6b","excerpt":"[TOC] Motivation Information Systems Design Conceptual Design -> Technical Design -> Implementation Orthogonal Persistence Data has to outlive the execution of…","html":"<p>[TOC]</p>\n<!-- Lecture 1 Slides/Notes Start -->\n<h1 id=\"motivation\">Motivation</h1>\n<ul>\n<li>Information Systems Design\n<ul>\n<li>Conceptual Design -> Technical Design -> Implementation</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"orthogonal-persistence\">Orthogonal Persistence</h2>\n<p>Data has to outlive the execution of the program</p>\n<ul>\n<li><strong>Independence</strong> of longelivety of data\n<ul>\n<li>How much code needs to be written for persistence (effort for programmer)\n<ul>\n<li>None at all would be nice but not realistic (GUI objects usually don’t need storing…)</li>\n</ul>\n</li>\n<li>Data is stored automatically</li>\n<li>Not always desirable: don’t need to store UI, messages …</li>\n<li>3 possible solutions\n<ol>\n<li>implicit: save all objects automatically</li>\n<li>explicit: objects need to be saved manually</li>\n<li>on class base (different granularity)</li>\n</ol>\n</li>\n</ul>\n</li>\n<li><strong>Data Type Orthogonality</strong> all data objects should be allowed to be persistent (long-lived, transient)\n<ul>\n<li>The data types do not need to be modified (implicitly or explicitly) to allow persistence</li>\n<li>e.g Serializable interface in Java does not satisfy this criteria (classes that don’t implement the interface can’t be stored)</li>\n</ul>\n</li>\n<li><strong>Identification</strong>: mechanism for identifying persistent object not related to the type system\n<ul>\n<li>Transferring data from persistence storage to memory</li>\n<li>e.g specify which classes/objects should be stored persistence</li>\n<li>separation of concerns</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>No commercial DB system fully satisfies the above criteria</p>\n</blockquote>\n<h2 id=\"impedance-missmatch\">Impedance Missmatch</h2>\n<ul>\n<li>Difference between models\n<ul>\n<li>OOP data model is based on object trees</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Relational_model\">The Relational Model</a> is based on tables</li>\n</ul>\n</li>\n<li>OOP Languages\n<ul>\n<li>Difference between attributes and relationships not clear</li>\n<li>Both are (usually) reference types in a class</li>\n</ul>\n</li>\n<li>Different models because there are different requirements</li>\n<li>Mapping code between the two models needed\n<ul>\n<li>A lot of solutions available</li>\n<li>Affects run-time (and often development)</li>\n</ul>\n</li>\n<li>Inheritance (OOP) is difficult to model in relational DBs\n<ul>\n<li>Objects spread over several tables (other approaches possible)</li>\n</ul>\n</li>\n</ul>\n<p>An overview of the mismatch is shown on <a href=\"http://www.tutorialspoint.com/hibernate/orm_overview.htm\">Tutorialspoint</a></p>\n<table>\n<thead>\n<tr>\n<th>Mismatch</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Granularity</td>\n<td>An object model can have more classes than the number of corresponding tables in the DB.</td>\n</tr>\n<tr>\n<td>Inheritance</td>\n<td>In OOP inheritance is a base concept. The Relational Model doesn’t support this directly.</td>\n</tr>\n<tr>\n<td>Identity</td>\n<td>The Relational Model defines identity. In OOP there is often a difference between equality and identity.</td>\n</tr>\n<tr>\n<td>Association</td>\n<td>OOP uses references. The Relational Model uses foreign keys.</td>\n</tr>\n<tr>\n<td>Navigation</td>\n<td>OOP uses following references in object tree. The Relational Model uses queries.</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"relational-databases\">Relational Databases</h2>\n<ul>\n<li>Tables, Rows, Columns…\n<ul>\n<li>Table: Relation (similar to class)</li>\n<li>Columns: Relation attributes (correspond to class attributes)</li>\n<li>Keys: Pointers (relationships)</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>It’s difficult to match the relational database model to the object oriented model</p>\n</blockquote>\n<h2 id=\"object-relational-mapping-orm\">Object-relational mapping (ORM)</h2>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Object-relational_mapping\">Object-relational mapping</a> can be used against object-relational miss-match\n<ul>\n<li>But it’s not a very good approach</li>\n<li>There are a lot of solutions: Hibernate, <a href=\"http://www.qxorm.com/qxorm_en/home.html\">QxOrm</a>, …</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"develop-own-database\">Develop own Database</h2>\n<ul>\n<li>Support application development (programming language)\n<ul>\n<li>Clients of the DB system are developers (not end user)</li>\n</ul>\n</li>\n<li>Support persistent data management</li>\n<li>One data model (OOP)</li>\n<li>One language (Java?)</li>\n</ul>\n<h2 id=\"sql\">SQL</h2>\n<h3 id=\"data-definition-language-ddl\">Data Definition Language (DDL)</h3>\n<p>Definition of data models</p>\n<ul>\n<li>Concepts\n<ul>\n<li>Relations</li>\n<li>Relation attributes and domains</li>\n<li>Primary and foreign key</li>\n</ul>\n</li>\n<li>Operations\n<ul>\n<li>Create tables (<code class=\"language-text\">class</code> in Java)</li>\n<li>Declare relation attributes</li>\n<li>Declare primary and foreign keys</li>\n<li>Alter tables</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"data-manipulation-language-dml\">Data Manipulation Language (DML)</h3>\n<p>Creation and management of data</p>\n<ul>\n<li>Concepts\n<ul>\n<li>Relation touple</li>\n<li>Predicate</li>\n</ul>\n</li>\n<li>Operations\n<ul>\n<li>Insert</li>\n<li>Update</li>\n<li>Delete</li>\n<li>in Java: <code class=\"language-text\">new</code> and ‘setters’</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"query-language-ql\">Query Language (QL)</h3>\n<p>Retrieval of data</p>\n<ul>\n<li>Concepts\n<ul>\n<li>Query</li>\n<li>Predicate</li>\n<li>Query result</li>\n</ul>\n</li>\n<li>Operations (Relational Algebra)\n<ul>\n<li>Project</li>\n<li>Join</li>\n<li>Select</li>\n<li>in Java: ‘getters’</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ddl-dml-and-ql-in-sql-and-java\">DDL, DML and QL in SQL and Java</h2>\n<p>DD, DM supported in Java. Querying is very limited.</p>\n<ul>\n<li>DD</li>\n</ul>\n<p>SQL</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> name <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>Java</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Person</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">String</span> email<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>DM</li>\n</ul>\n<p>SQL</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">UPDATE</span> name <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>Java</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\np<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"Bill Stinnet\"</span></code></pre></div>\n<ul>\n<li>Querying</li>\n</ul>\n<p>SQL</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> col_name <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>Java</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span>name</code></pre></div>\n<p>LINQ is a powerful and compile time safe support for querying.</p>\n<h2 id=\"learning-goals\">Learning Goals</h2>\n<ul>\n<li>Motivation for Database technologies (not relational)\n<ul>\n<li>Design- and run-time</li>\n<li>Complex application domains</li>\n<li>Schema and data evolution</li>\n</ul>\n</li>\n<li>Understanding of object-oriented data model\n<ul>\n<li>what is OOP?</li>\n<li>ODMG</li>\n</ul>\n</li>\n<li>New and alternative concepts and applications</li>\n<li>Develop an object database\n<ul>\n<li>Requirements</li>\n<li>Challenges\n<ul>\n<li>integration with application</li>\n<li>duplicate objects</li>\n<li>OO-specific indexing</li>\n<li>…</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Object database technologies\n<ul>\n<li>Products\n<ul>\n<li>db4o</li>\n<li>Object Store</li>\n<li>Objectivity</li>\n<li>Versant</li>\n</ul>\n</li>\n<li>General concepts</li>\n<li>Solutions to the challenges</li>\n</ul>\n</li>\n<li>Comparison to other database technologies\n<ul>\n<li>Android SDK</li>\n<li>Hibernate</li>\n<li>Django</li>\n<li>…</li>\n</ul>\n</li>\n</ul>\n<!-- Lecture 1 Slides/Notes End -->\n<h1 id=\"general-topics-for-dbs\">General Topics for DB’s</h1>\n<p>[Prepared Statement]</p>\n<h2 id=\"crud-and-acid\">CRUD and ACID</h2>\n<ul>\n<li>\n<p>The acronym <a href=\"https://en.wikipedia.org/wiki/Create,_read,_update_and_delete\">CRUD</a> stands for the basic functions of a database system</p>\n<ul>\n<li>Create</li>\n<li>Read</li>\n<li>Update</li>\n<li>Delete</li>\n</ul>\n</li>\n<li>\n<p>The acronym <a href=\"https://en.wikipedia.org/wiki/ACID\">ACID</a> stands for the properties that allow for concurrent database transactions</p>\n<ul>\n<li>Atomicity</li>\n<li>Consistency</li>\n<li>Isolation</li>\n<li>Durability</li>\n</ul>\n</li>\n</ul>\n<!-- Lecture 2 Slides/Notes Start -->\n<h1 id=\"odmg-standard\">ODMG Standard</h1>\n<ul>\n<li>\n<p>What is an object?</p>\n<ul>\n<li>Something that can be pointed to?</li>\n<li>Can be passed on as a reference?</li>\n<li>Distinct from single values</li>\n<li>properties and behaviour</li>\n<li>representing something (moddeling the real world)</li>\n</ul>\n</li>\n<li>\n<p>Object:</p>\n<ul>\n<li>properties</li>\n<li>behaviour</li>\n<li>presenting something (modelling the real world)</li>\n</ul>\n</li>\n</ul>\n<p>Examples in Java:</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Simple</th>\n<th>Complex</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Reference</td>\n<td><code class=\"language-text\">Integer</code></td>\n<td><code class=\"language-text\">Object</code></td>\n</tr>\n<tr>\n<td>Value</td>\n<td><code class=\"language-text\">int</code></td>\n<td>N/A</td>\n</tr>\n</tbody>\n</table>\n<p>In some languages (PHP, JavaScript, …) Objects and Associative Arrays are the same (or similar).</p>\n<ul>\n<li>\n<p>Some constructs can be extended over time</p>\n<ul>\n<li>possible with map (add key/value)</li>\n<li><em>not</em> possible with <em>class</em> in Java</li>\n</ul>\n</li>\n<li>\n<p>Object Orientation needs a broader definition!</p>\n<ul>\n<li>not coupled to a specific programming language</li>\n</ul>\n</li>\n<li>\n<p>Most database systems often independent of programming languages</p>\n<ul>\n<li>e.g SQL very different from the language where the DB is used (independent of language)</li>\n</ul>\n</li>\n<li>\n<p>Object database systems are more coupled to one (or multiple) programming language</p>\n</li>\n</ul>\n<h2 id=\"object-data-management-group-odmg\">Object Data Management Group (ODMG)</h2>\n<h3 id=\"object-model\">Object Model</h3>\n<ul>\n<li>\n<p>Based on <a href=\"https://en.wikipedia.org/wiki/Object_Management_Group\">OMG</a> object model</p>\n</li>\n<li>\n<p>Basic modeling primitives</p>\n<ul>\n<li><strong>object</strong>: unique identifier (identity)</li>\n<li><strong>literal</strong>: no identifier</li>\n</ul>\n</li>\n<li>\n<p>Object state defined by the values (properties)</p>\n<ul>\n<li>attributes</li>\n<li>relationships</li>\n</ul>\n</li>\n<li>\n<p>Object behavior</p>\n<ul>\n<li>set of operations (can be executed)</li>\n</ul>\n</li>\n<li>\n<p>Objects and literals are categorized by their type</p>\n<ul>\n<li>A type defines common properties and common behavior</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"types\">Types</h4>\n<ul>\n<li>Specification\n<ul>\n<li>properties\n<ul>\n<li>attributes</li>\n<li>relationships</li>\n</ul>\n</li>\n<li>operations</li>\n<li>exceptions</li>\n</ul>\n</li>\n<li>Implementation\n<ul>\n<li>language binding</li>\n<li>a specification can have more than one implementation</li>\n</ul>\n</li>\n<li>Similar to C++\n<ul>\n<li>Header-File: Specification</li>\n<li>Source-File: Implementation</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"type-specifications\">Type Specifications</h4>\n<ul>\n<li>Interface\n<ul>\n<li>defines only abstract behavior</li>\n<li><code class=\"language-text\">interface Employee {...};</code></li>\n</ul>\n</li>\n<li>Class\n<ul>\n<li>defines both abstract behavior and abstract state</li>\n<li><code class=\"language-text\">class Person {...};</code></li>\n</ul>\n</li>\n<li>Literal\n<ul>\n<li>defines abstract state</li>\n<li><code class=\"language-text\">struct Complex { float real; float imaginary; };</code></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"type-implementation\">Type Implementation</h4>\n<ul>\n<li>Representation\n<ul>\n<li>data structure</li>\n<li>derived from type’s abstract state by the language binding</li>\n<li>for each property contained in the abstract state there is an instance variable of an appropriate type defined</li>\n</ul>\n</li>\n<li>Methods\n<ul>\n<li>procedure bodies</li>\n<li>derived from type’s abstract behavior by the language binding</li>\n<li>also private methods with no counterpart in specification</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"subtyping-and-inheritance\">Subtyping and Inheritance</h4>\n<ul>\n<li>\n<p>Two types of inheritance relationships</p>\n<ol>\n<li>IS-A relationship\n<ul>\n<li>inheritance of behavior</li>\n<li>multiple inheritance, name overloading disallowed</li>\n<li><code class=\"language-text\">interface Professor : Employee {...};</code></li>\n</ul>\n</li>\n<li><strong>EXTENDS</strong> relationship\n<ul>\n<li>inheritance of state and behavior</li>\n<li>single inheritance</li>\n<li><code class=\"language-text\">class EmplPers extends Person : Employee {...};</code></li>\n</ul>\n</li>\n</ol>\n</li>\n<li>\n<p>Co- and Contravariant rules must hold</p>\n<ul>\n<li>Input Arguments: Contravariant</li>\n<li>Return Values (and Exceptions): Covariant</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"object-query-language-oql\">Object Query Language (OQL)</h3>\n<p>Based on ODMG Object Model and SQL-92</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span>  list_of_values\n<span class=\"token keyword\">from</span>    list_of_collections_and_typical_members\n<span class=\"token keyword\">where</span>   condition</code></pre></div>\n<ul>\n<li><code class=\"language-text\">SELECT</code>: Get attributes</li>\n<li><code class=\"language-text\">FROM</code>: The base population of potential results to search in</li>\n<li><code class=\"language-text\">WHERE</code>: Predicates (conditions) that have to be true so that the results are selected as result</li>\n</ul>\n<p>Mapping to OOP not obvious.</p>\n<p>Table in relational DBs has tow roles:</p>\n<ol>\n<li>Defining Type</li>\n<li>Container of all values (of that type)</li>\n</ol>\n<p>In OOP 2. is missing. A class just defines a type but is not a container of all instances of that class.</p>\n<p>ODMG defines Extents.</p>\n<h4 id=\"difference-to-sql\">Difference to SQL</h4>\n<p>This is illegal as the “dot” operator cannot be applied to a collection of objects:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> a<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span>title\n<span class=\"token keyword\">from</span>   Authors a\n<span class=\"token keyword\">where</span>  a<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"Tilmann Zaeschke\"</span></code></pre></div>\n<p>Correct solution based on <em>correlated</em> variables:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> p<span class=\"token punctuation\">.</span>title\n<span class=\"token keyword\">from</span> Authors a<span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">.</span>authors p\n<span class=\"token keyword\">where</span> a<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"Tilmann Zaeschke\"</span></code></pre></div>\n<h4 id=\"return-types\">Return Types</h4>\n<ul>\n<li>Queries return sets, bags or lists</li>\n</ul>\n<p>As a default, queries return a <em>bag</em></p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> <span class=\"token keyword\">first</span>: p<span class=\"token punctuation\">.</span>authored_by<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">.</span><span class=\"token keyword\">year</span>\n<span class=\"token keyword\">from</span>   Publications p</code></pre></div>\n<p>In Java:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Bag</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Struct</span> <span class=\"token punctuation\">{</span> <span class=\"token class-name\">Author</span> first<span class=\"token punctuation\">,</span> string title<span class=\"token punctuation\">,</span> integer year <span class=\"token punctuation\">}</span><span class=\"token operator\">></span></code></pre></div>\n<p>Queries with <code class=\"language-text\">DISTINCT</code> return a <em>set</em></p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> <span class=\"token keyword\">distinct</span> a<span class=\"token punctuation\">.</span>name\n<span class=\"token keyword\">from</span>   Authors a</code></pre></div>\n<p>In Java:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Set</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Struct</span> <span class=\"token punctuation\">{</span> string name <span class=\"token punctuation\">}</span><span class=\"token operator\">></span></code></pre></div>\n<p>Queries with <code class=\"language-text\">ORDER BY</code> return a <em>list</em></p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> p<span class=\"token punctuation\">.</span>title\n<span class=\"token keyword\">from</span> Publications s <span class=\"token keyword\">order</span> <span class=\"token keyword\">by</span> p<span class=\"token punctuation\">.</span><span class=\"token keyword\">year</span> <span class=\"token keyword\">desc</span></code></pre></div>\n<p>In Java:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">List</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Struct</span> <span class=\"token punctuation\">{</span> string name <span class=\"token punctuation\">}</span><span class=\"token operator\">></span></code></pre></div>\n<h4 id=\"extents\">Extents</h4>\n<ul>\n<li>Extent of a type is the set (collection) of all active instances\n<ul>\n<li><code class=\"language-text\">class Person</code>: extent of class Person would be the set of all person objects in the data management system</li>\n</ul>\n</li>\n<li>Extents can be maintained automatically</li>\n</ul>\n<h3 id=\"collections\">Collections</h3>\n<p>OMDG supports collections:</p>\n<ul>\n<li>set: un-ordered, no duplicates</li>\n<li>bag: un-ordered, duplicates</li>\n<li>list: ordered, elements can be inserted</li>\n<li>array: ordered, elements can be replaced</li>\n<li>dictionary: maps keys to values</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Single elements</th>\n<th>Duplicates</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Ordered</td>\n<td>? (heap)</td>\n<td>list</td>\n</tr>\n<tr>\n<td>Un-ordered</td>\n<td>set</td>\n<td>bag</td>\n</tr>\n</tbody>\n</table>\n<p>Support for objects and literals:</p>\n<ul>\n<li>Collection objects: <code class=\"language-text\">Set&lt;t></code>, <code class=\"language-text\">Bag&lt;t></code>, <code class=\"language-text\">List&lt;t></code>, <code class=\"language-text\">Array&lt;t></code>, <code class=\"language-text\">Dictionary&lt;t,v></code></li>\n<li>Collection literals: <code class=\"language-text\">set&lt;t></code>, <code class=\"language-text\">bag&lt;t></code>, <code class=\"language-text\">list&lt;t></code>, <code class=\"language-text\">array&lt;t></code>, <code class=\"language-text\">dictionary&lt;t,v></code></li>\n</ul>\n<h4 id=\"sub-collections\">Sub-collections</h4>\n<p>OMDG supports sub-collections</p>\n<h3 id=\"relationships\">Relationships</h3>\n<ul>\n<li>\n<p>All relationships are binary</p>\n<ul>\n<li>many-to-many</li>\n<li>many-to-one</li>\n<li>one-to-one</li>\n</ul>\n</li>\n<li>\n<p>No support for ternary (or higher) relationships</p>\n<ul>\n<li>can be simulated by creating classes to represent relationship touple</li>\n</ul>\n</li>\n<li>\n<p>System maintains referential integrity!</p>\n</li>\n<li>\n<p>Keywords for attributes and relationships</p>\n<ul>\n<li><code class=\"language-text\">attribute</code>: for normal class attributes</li>\n<li><code class=\"language-text\">relationship</code>: for relationship references (integrity checks can be performed)</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"persistence\">Persistence</h3>\n<ul>\n<li>Persistence by reachability\n<ul>\n<li>not necessary the best option</li>\n</ul>\n</li>\n<li>Database gives access to global names\n<ul>\n<li>explicitly <em>named root objects</em></li>\n<li>types defined in schema</li>\n<li>named extents of types</li>\n<li>store object graphs</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"other-concepts-supported\">Other Concepts Supported</h3>\n<ul>\n<li>Database operations</li>\n<li>Locking and concurrency control</li>\n<li>Transactions</li>\n<li>Access to meta-data</li>\n<li>Built-in structured literals and objects\n<ul>\n<li>dates</li>\n<li>times</li>\n<li>time-stamps</li>\n<li>intervals</li>\n<li>…</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"object-definition-language-odl\">Object Definition Language (ODL)</h3>\n<ul>\n<li>programming language independent, extensible and practical</li>\n<li>compatible to OMG Interface Definition Language (IDL)</li>\n</ul>\n<p>ODL Syntax:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> name <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">(</span> extent name<span class=\"token punctuation\">,</span> key name <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">{</span> exception name <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">{</span> type name <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">{</span> attribute type name <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">{</span> relationship type name inverse relationship <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">{</span> type <span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token punctuation\">(</span>in<span class=\"token operator\">|</span>out<span class=\"token operator\">|</span>inout<span class=\"token punctuation\">)</span> type name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span>raises <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> exception <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>extent and key of a class can be specified optionally</li>\n<li>relationships specify inverse to maintain referential integrity</li>\n<li>method signatures are implemented by language binding</li>\n</ul>\n<h3 id=\"collection-expressions\">Collection Expressions</h3>\n<ul>\n<li>Aggregate operators\n<ul>\n<li><code class=\"language-text\">AVG</code>, <code class=\"language-text\">SUM</code>, <code class=\"language-text\">MIN</code>, <code class=\"language-text\">MAX</code>, and <code class=\"language-text\">COUNT</code> apply to collections that have a compatible member type</li>\n</ul>\n</li>\n<li>Operations for sets and bags\n<ul>\n<li><code class=\"language-text\">UNION</code>, <code class=\"language-text\">INTERSECTION</code> and <code class=\"language-text\">EXCEPT</code></li>\n<li>inclusion tests (subset, super-set)</li>\n</ul>\n</li>\n<li>Special operations for lists\n<ul>\n<li>Simple coercion</li>\n<li>a collection of one element can be coerced to that element using the <code class=\"language-text\">ELEMENT</code> operator</li>\n</ul>\n</li>\n<li>Flattening a collection of collections</li>\n</ul>\n<h3 id=\"language-bindings\">Language Bindings</h3>\n<ul>\n<li>C++</li>\n<li>Java</li>\n<li>Smalltalk</li>\n<li>…</li>\n</ul>\n<h1 id=\"hibernate\">Hibernate</h1>\n<ul>\n<li>Example of a <a href=\"https://en.wikipedia.org/wiki/Object-relational_mapping\">Object-relational mapping</a> tool</li>\n<li>Challenges\n<ul>\n<li>Data has to outlive the execution of the program</li>\n<li>The program is written in an OOP language</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/321ba1b4bbf2964b6e5516af3726f041/db_mappings.svg\" alt=\"Mappings\"></p>\n<ul>\n<li>Problems of Object Identity\n<ul>\n<li>Two object graphs can point to same objects</li>\n<li>Duplicates can be created When deserialized</li>\n<li>Programmer must take care to avoid multiplicity!</li>\n</ul>\n</li>\n<li>Object Identity\n<ul>\n<li>Multiple models</li>\n<li>Impedance mismatch</li>\n<li>Transformation must be implemented (Design Time)</li>\n<li>Transformation must be carried out (Run Time)</li>\n<li>Must be implemented for each application</li>\n</ul>\n</li>\n<li>Possible use of SQL\n<ul>\n<li>Integrating a relational database at the level of SQL (e.g. JDBC, Google Android, PHP mysqli)\n<ul>\n<li>OK for simple application domains (e.g. few classes with base type attributes)</li>\n<li>Not OK for complex application domains (e.g. many classes with reference type attributes, multi-valued attributes, associations, inheritance)</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"object-relational-mappings\">Object-Relational Mappings</h2>\n<ul>\n<li>Map object-oriented domain model to relational database\n<ul>\n<li>Hibernate\n<ul>\n<li>Free implementation for Java</li>\n<li>maps Java types to SQL types</li>\n<li>transparent persistence for classes meeting certain requirements</li>\n<li>generates SQL for more than 25 dialects behind the scenes</li>\n<li>provides data query and retrieval using either HQL or SQL</li>\n<li>can be used stand-alone with Java SE or in Java EE applications</li>\n</ul>\n</li>\n<li>Java Persistence API (JPA)\n<ul>\n<li>Defines interface (and annotations) to use y other systems</li>\n<li>Enterprise Java Beans Standard 3.0</li>\n<li>introduced annotations to define mapping</li>\n<li>javax.persistence package</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"main-concepts\">Main Concepts</h2>\n<ul>\n<li><code class=\"language-text\">Configuration</code>\n<ul>\n<li>Connection to database (hibernate.properties or hibernate.cfg.xml)</li>\n<li>Which DBMS? (MySQL, HSQL, …)</li>\n<li>Which DB Instance? (Database Name)</li>\n<li>Mappings between classes and database tables</li>\n<li>The Configuration object is created at first\n<ul>\n<li>usually created only once during application initialization</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code class=\"language-text\">SessionFactory</code>\n<ul>\n<li>Created by using the configuration object</li>\n<li>Session objects can be created and supplied with configuration</li>\n<li>Heavyweight object: create during start up and keep for later use</li>\n<li>multiple databases require multiple <code class=\"language-text\">SessionFactory</code> objects</li>\n</ul>\n</li>\n<li><code class=\"language-text\">Session</code> object\n<ul>\n<li>Used to get physical connection to the database</li>\n<li>lightweight</li>\n<li>designed to be instantiated each time an interaction with the DB is needed</li>\n<li>Persistent objects are <em>stored</em> and <em>retrieved</em> through <code class=\"language-text\">Session</code> object</li>\n<li>should not be kept open for a long time\n<ul>\n<li>usually not thread safe</li>\n<li>create before use</li>\n<li>destroy after use</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code class=\"language-text\">Transaction</code> object\n<ul>\n<li>represent a unit of work with the DB</li>\n<li>handled by underlying transaction manager and transaction (JDBC or JTA)</li>\n<li>optional object\n<ul>\n<li>transactions can be managed in own application code</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code class=\"language-text\">Query</code> object\n<ul>\n<li>SQL or Hibernate Query Language (HQL)</li>\n<li>bind query parameters</li>\n<li>limit number of results</li>\n<li>execute query</li>\n</ul>\n</li>\n<li><code class=\"language-text\">Criteria</code> object\n<ul>\n<li>used to create and execute <em>object oriented</em> criteria queries to retrieve objects</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"configuration\">Configuration</h2>\n<ul>\n<li>Hibernate needs to know where to find some information about class mappings and database</li>\n<li>XML file: <em>hibernate.cfg.xml</em> (or Java properties file <em>hibernate.properties</em>)</li>\n</ul>\n<h3 id=\"properties\">Properties</h3>\n<table>\n<thead>\n<tr>\n<th>Property</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>hibernate.dialect</td>\n<td>The SQL dialect used to generate persistence code</td>\n</tr>\n<tr>\n<td>hibernate.connection.driver_class</td>\n<td>The JDBC driver class</td>\n</tr>\n<tr>\n<td>hibernate.connection.url</td>\n<td>The URL to the database instance</td>\n</tr>\n<tr>\n<td>hibernate.connection.username</td>\n<td>The username for the database</td>\n</tr>\n<tr>\n<td>hibernate.connection.password</td>\n<td>The password for the database</td>\n</tr>\n<tr>\n<td>hibernate.connection.pool_size</td>\n<td>The number of connections in the Hibernate database connection pool</td>\n</tr>\n<tr>\n<td>hibernate.connection.autocommit</td>\n<td>Autocommit mode for the JDBC connection</td>\n</tr>\n</tbody>\n</table>\n<p>There are additional settings for using a database along with an application server and JNDI.</p>\n<h3 id=\"persistent-objects\">Persistent Objects</h3>\n<p>Only Plain Old Java Object (POJO) can be saved in the DB.</p>\n<p>Requirements:</p>\n<ul>\n<li>Default constructor</li>\n<li>Class should contain an ID\n<ul>\n<li>Maps to the primary key column in DB table</li>\n</ul>\n</li>\n<li>Attributes should be private\n<ul>\n<li>Public accessor functions (getter, setter) need to be provided</li>\n<li>JavaBean style accessors: getXYZ, setXYZ</li>\n</ul>\n</li>\n<li>Persistence class either\n<ul>\n<li>non-final or</li>\n<li>implementation of interface that declares all public methods</li>\n</ul>\n</li>\n<li>Some additional minor restrictions from EJB framework</li>\n</ul>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">SessionFactory</span> factory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Configuration</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">buildSessionFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>Session\n<ul>\n<li>Connection to a database instance</li>\n<li>Created when we want to work with a database</li>\n<li>Using a Session object, we can store and retrieve application data</li>\n<li>Methods:\n<ul>\n<li>save</li>\n<li>createQuery</li>\n<li>update</li>\n<li>delete</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Session</span> session <span class=\"token operator\">=</span> factory<span class=\"token punctuation\">.</span><span class=\"token function\">openSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\nsession<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\nsession<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>Transaction\n<ul>\n<li>Opened with a Session object <code class=\"language-text\">beginTransaction()</code> and closed using <code class=\"language-text\">commit()</code></li>\n</ul>\n</li>\n</ul>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Transaction</span> tx <span class=\"token operator\">=</span> session<span class=\"token punctuation\">.</span><span class=\"token function\">beginTransaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\ntx<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>Query\n<ul>\n<li>Represents a query (e.g. <code class=\"language-text\">SELECT * FROM PERSONS</code>, HQL).</li>\n<li>Result is a list</li>\n</ul>\n</li>\n</ul>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">List</span> persons <span class=\"token operator\">=</span> session<span class=\"token punctuation\">.</span><span class=\"token function\">createQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"FROM Persons\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> p<span class=\"token operator\">:</span> persons<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>Criteria\n<ul>\n<li>An object-oriented representation of query criteria</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"mapping-associations\">Mapping Associations</h2>\n<ul>\n<li>Uni- and bidirectional associations</li>\n<li>Unordered and ordered associations</li>\n<li>Association cardanality types\n<ul>\n<li>one-to-one</li>\n<li>many-to-one</li>\n<li>one-to-many</li>\n<li>many-to-many</li>\n</ul>\n</li>\n<li>Join Tables to map complex associations</li>\n</ul>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> AUTHOR<span class=\"token punctuation\">(</span>AUTHOR_ID <span class=\"token keyword\">BIGINT</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> AUTHORSPUBLICATIONS<span class=\"token punctuation\">(</span>\n  AUTHOR_ID <span class=\"token keyword\">BIGINT</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n  PUBLICATION_ID <span class=\"token keyword\">BIGINT</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">(</span>AUTHOR_ID<span class=\"token punctuation\">,</span> PUBLICATION_ID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> PUBLICATION<span class=\"token punctuation\">(</span>PUBLICATION_ID <span class=\"token keyword\">BIGINT</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"mapping-inheritance\">Mapping Inheritance</h2>\n<ul>\n<li>Multiple strategies\n<ul>\n<li>One table per class hierarchy</li>\n<li>One table per subclass</li>\n<li>One table per concrete class</li>\n</ul>\n</li>\n<li>Mapping strategies can be mixed\n<ul>\n<li>Different parts of inheritance hierarchy can have different strategy</li>\n</ul>\n</li>\n<li>Implicit polymorphism\n<ul>\n<li>One table per concrete class</li>\n<li>Common interface <em>not</em> mentioned in the mapping</li>\n<li>Common properties are mapped in <em>every</em> table</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"annotations\">Annotations</h2>\n<ul>\n<li>Since Java 5</li>\n<li>Java Persistence API (JPA, Enterprise Java Beans 3.0)</li>\n<li>Annotations instead of XML for mapping</li>\n<li>Standardizes ORM</li>\n<li>Hibernate implements JPA</li>\n</ul>\n<h1 id=\"google-android\">Google Android</h1>\n<ul>\n<li>Linux based OS</li>\n<li>Default applications: Search, Maps, Mail, Calendar, Contacts…</li>\n<li>Java SDK</li>\n<li>Support for persistent data management</li>\n<li>Smart Phone / Tablet</li>\n</ul>\n<h2 id=\"application-component-model\">Application component model</h2>\n<ul>\n<li>\n<p>Activity (UI)</p>\n</li>\n<li>\n<p>Service (API, Computation)</p>\n</li>\n<li>\n<p>Broadcast Receiver (Events)</p>\n</li>\n<li>\n<p>Content Provider (Data Management)</p>\n</li>\n<li>\n<p>Manifest</p>\n<ul>\n<li>lists the application components</li>\n<li>sets activity to be shown at startup</li>\n<li>components can be made available to other applications</li>\n</ul>\n</li>\n<li>\n<p>Intent: request the use of application components (integration with other apps)</p>\n<ul>\n<li>showing activities</li>\n<li>using content provides</li>\n<li>listening to events</li>\n<li>starting services</li>\n<li>…</li>\n</ul>\n</li>\n<li>\n<p><a href=\"http://developer.android.com/guide/components/activities.html\">Application Life-cycle</a></p>\n<ul>\n<li>States: New Activity, Running, Paused, Stopped, Destroyed</li>\n<li>Extend <code class=\"language-text\">Activity</code></li>\n<li>Application can react to state changes</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"data-management\">Data Management</h2>\n<ul>\n<li>\n<p>Low-level: SQL</p>\n</li>\n<li>\n<p>High-level: Content Provider</p>\n</li>\n<li>\n<p>Database Instance</p>\n<ul>\n<li>SQLite</li>\n<li><strong>CRUD</strong>\n<ul>\n<li><strong>C</strong>reate (Insert)</li>\n<li><strong>R</strong>ead (Retrieve, Query)</li>\n<li><strong>U</strong>pdate</li>\n<li><strong>D</strong>elete</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>Cursor</p>\n<ul>\n<li>Iterator over result</li>\n<li>Methods <code class=\"language-text\">isLast()</code> and <code class=\"language-text\">moveToNext()</code></li>\n<li>Type specific getter methods (e.g <code class=\"language-text\">getInt(3)</code>)</li>\n<li>Access with index</li>\n<li>Index can be retrieved <code class=\"language-text\">getColumnIndex(String colName)</code></li>\n</ul>\n</li>\n<li>\n<p>Content Provider</p>\n<ul>\n<li>Abstract class implemented by application</li>\n<li>Uses\n<ul>\n<li>Cursor</li>\n<li>URI</li>\n<li>ContentValue</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<!-- OODB Manifesto start -->\n<h1 id=\"object-oriented-databases-object-database-manifesto\">Object-Oriented Databases: Object Database Manifesto</h1>\n<ul>\n<li>\n<p>Avoid impedance mismatch</p>\n</li>\n<li>\n<p>Provide uniform data model</p>\n</li>\n<li>\n<p>Combine features of</p>\n<ul>\n<li>OOP</li>\n<li>Database Management Systems</li>\n</ul>\n</li>\n<li>\n<p>The object-oriented database manifesto</p>\n<ul>\n<li>13 mandatory features</li>\n<li>5 optional characteristics</li>\n<li>4 open choices</li>\n<li>several important topics not addressed</li>\n</ul>\n</li>\n<li>\n<p>Object-oriented systems (mandatory)</p>\n<ul>\n<li>1. Complex objects</li>\n<li>2. Object identity</li>\n<li>3. Encapsulation</li>\n<li>4. Types and classes</li>\n<li>5. Type and class hierarchies</li>\n<li>6. Overriding, overloading and late binding</li>\n<li>7. Computational completeness</li>\n<li>8. Extensibility</li>\n</ul>\n</li>\n<li>\n<p>Database management systems (mandatory)</p>\n<ul>\n<li>9. Persistence</li>\n<li>10. Efficiency</li>\n<li>11. Concurrency</li>\n<li>12. Reliability</li>\n<li>13. Declarative query language</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"objects-mandatory\">Objects (mandatory)</h2>\n<ul>\n<li>\n<p>Complex objects</p>\n<ul>\n<li>build from simpler objects (constructor)</li>\n<li>collections</li>\n</ul>\n</li>\n<li>\n<p>Object identity and equality</p>\n<ul>\n<li>Object ID (OID)\n<ul>\n<li>unique and immutable</li>\n</ul>\n</li>\n<li>sharing of objects (references)</li>\n<li><em>identical</em> objects have same OID</li>\n<li><em>equal</em> objects have same state</li>\n<li>shallow and deep equality</li>\n</ul>\n</li>\n<li>\n<p>Touple: entities and their attributes</p>\n</li>\n<li>\n<p>Sets: collections of entities</p>\n</li>\n<li>\n<p>Lists: order</p>\n</li>\n<li>\n<p>Constructor orthogonality</p>\n<ul>\n<li>supports arbitrary nesting such as\n<ul>\n<li>sets of sets</li>\n<li>set of records</li>\n<li>records containing records</li>\n<li>…</li>\n</ul>\n</li>\n<li>In contrast, relational databases only support\n<ul>\n<li>sets of records (relation with touple) and</li>\n<li>touple containing atomic values</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>Complex objects also require</p>\n<ul>\n<li>transitive retrieval and deletion of objects</li>\n<li>deep and shallow copying</li>\n<li>…</li>\n</ul>\n</li>\n<li>\n<p>Encapsulation</p>\n<ul>\n<li>interface\n<ul>\n<li>signatures of public methods</li>\n</ul>\n</li>\n<li>implementation\n<ul>\n<li>includes data and methods</li>\n</ul>\n</li>\n<li>object state modification only through public methods</li>\n<li>object data structure may be <em>exposed</em> for <em>declarative queries</em>!</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"types-and-classes\">Types and Classes</h2>\n<ul>\n<li>Data types\n<ul>\n<li>definition of object properties</li>\n<li>static part: object structure</li>\n<li>dynamic part: object behavior</li>\n<li>separation of interface and implementation</li>\n<li>Check of correctness at compile time</li>\n</ul>\n</li>\n<li>Object classes\n<ul>\n<li>container for objects of the same type</li>\n<li>objects can be added and removed</li>\n<li>used to add, remove and iterate over all existing objects\n<ul>\n<li>to present, manipulate … them</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"generalization-hierarchies\">Generalization Hierarchies</h2>\n<ul>\n<li>Powerful modeling tool</li>\n<li>Reuse (specification and implementation)</li>\n<li>Inheritance\n<ul>\n<li>Substitution principle</li>\n<li>Inherited attributes and methods (from super-class)</li>\n<li>New attributes and methods can be added (in subclass)</li>\n</ul>\n</li>\n<li>Migration between classes\n<ul>\n<li>move objects between hierarchy levels</li>\n<li>object specialization and generalization</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"durability-and-efficiency\">Durability and Efficiency</h2>\n<ul>\n<li>\n<p>Persistence</p>\n<ul>\n<li>data has to survive the program execution</li>\n<li>orthogonal persistence</li>\n<li>implicit persistence</li>\n</ul>\n</li>\n<li>\n<p>Secondary storage management</p>\n<ul>\n<li>index management</li>\n<li>data clustering</li>\n<li>data buffering</li>\n<li>access path selection</li>\n<li>query optimization</li>\n</ul>\n</li>\n<li>\n<p>Orthogonality</p>\n<ul>\n<li>Persistence applicable to all objects of any type</li>\n<li>No additional code necessary</li>\n<li>Moving objects between persistent and memory representation is not needed</li>\n</ul>\n</li>\n<li>\n<p>Similar requirements for  secondary storage management</p>\n<ul>\n<li>As a rule of thumb:\n<ul>\n<li>a database should work without it, but with it, it should perform better</li>\n</ul>\n</li>\n<li>If this requirement is met, a complete separation of the logical and physical level is achieved</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"concurrency-control-and-recovery\">Concurrency Control and Recovery</h2>\n<ul>\n<li>Concurrency\n<ul>\n<li>management of multiple users concurrently interacting</li>\n<li>atomicity, consistency, isolation and durability</li>\n<li>serialisability of operations</li>\n</ul>\n</li>\n<li>Reliability\n<ul>\n<li>resiliency to user, software and hardware failures</li>\n<li>transactions can be committed or aborted</li>\n<li>restore previous coherent state of data</li>\n<li>redoing and undoing of transactions</li>\n<li>logging of operations</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"declarative-query-language\">Declarative Query Language</h2>\n<ul>\n<li>High-level language\n<ul>\n<li>express non-trivial queries concisely</li>\n<li>text-based or graphical interface</li>\n<li>declarative</li>\n</ul>\n</li>\n<li>Efficient execution\n<ul>\n<li>possibility for query optimization</li>\n<li>Application independent</li>\n<li>work on any possible database</li>\n<li>no need for additional methods on user-defined types</li>\n</ul>\n</li>\n</ul>\n<!-- OODB Manifesto end -->\n<!-- Lecture 5 Start -->\n<h1 id=\"db4o\">db4o</h1>\n<ul>\n<li>Open Source project\n<ul>\n<li>Java and .NET</li>\n</ul>\n</li>\n<li>Features\n<ul>\n<li>No conversion of mapping needed</li>\n<li>Classes don’t need to be changed to make them persistent (datatype orthogonality)</li>\n<li>One line of code to store (complex) objects</li>\n<li>local or client/server mode</li>\n<li>ACID transaction model</li>\n<li>Automatic management and versioning of database schema</li>\n<li>Small memory foot-print (single 2Mb library)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"object-container\">Object Container</h2>\n<ul>\n<li>Represents db4o databases\n<ul>\n<li>local file mode or</li>\n<li>client connections to db4o server</li>\n</ul>\n</li>\n<li>Owns one transaction\n<ul>\n<li>operations are executed transactions</li>\n<li>transaction is started when object container is opened</li>\n<li>after commit/rollback next transaction is started automatically</li>\n</ul>\n</li>\n<li>Manages link between stored and instantiated objects\n<ul>\n<li>object identities</li>\n<li>loading, updating, unloading</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"storing-objects\">Storing Objects</h2>\n<ul>\n<li>Store objects with method <code class=\"language-text\">ObjectContainer.store(...)</code></li>\n<li>Arbitrary complex objects can be stored</li>\n<li>Persistence by reachability</li>\n</ul>\n<h2 id=\"retrieving-objects\">Retrieving Objects</h2>\n<ul>\n<li>3 Query languages\n<ol>\n<li>Query by Example\n<ul>\n<li>simple</li>\n<li>based on prototype objects</li>\n<li>selects <em>exact</em> matches only</li>\n</ul>\n</li>\n<li>Native Queries\n<ul>\n<li>expressed in application programming language</li>\n<li>type safe</li>\n<li>transformed to SODA (optimized)</li>\n</ul>\n</li>\n<li>Simple Object Data Access (SODA)\n<ul>\n<li>query API based on query graph</li>\n<li>methods for descending graph and applying constraints</li>\n</ul>\n</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"soda-queries\">SODA Queries</h3>\n<ul>\n<li>Expressed using <code class=\"language-text\">Query</code> objects\n<ul>\n<li><code class=\"language-text\">descend</code> adds or traverses a node in the query tree</li>\n<li><code class=\"language-text\">constrain</code> adds a constraint to a node in the query tree</li>\n<li><code class=\"language-text\">sortBy</code> sorts the result set</li>\n<li><code class=\"language-text\">orderAscending</code> and <code class=\"language-text\">orderDescending</code></li>\n<li><code class=\"language-text\">execute</code> executes the query</li>\n</ul>\n</li>\n<li>Interface Constraint\n<ul>\n<li><code class=\"language-text\">greater</code> and <code class=\"language-text\">smaller</code> comparison modes</li>\n<li><code class=\"language-text\">identity</code>, <code class=\"language-text\">equal</code> and <code class=\"language-text\">like</code> evaluation modes</li>\n<li><code class=\"language-text\">and</code>, <code class=\"language-text\">or</code> and <code class=\"language-text\">not</code> operators</li>\n<li><code class=\"language-text\">startsWith</code> and <code class=\"language-text\">endsWith</code> string comparisons</li>\n<li><code class=\"language-text\">contains</code> to test collection membership</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"updating-objects\">Updating Objects</h2>\n<ul>\n<li>Update procedure for persistent object\n<ul>\n<li>retrieve desired object from the database</li>\n<li>perform the required changes/modifications</li>\n<li>store object back to the database (calling <code class=\"language-text\">store</code> method)</li>\n</ul>\n</li>\n<li>db4o uses IDs to connect in-memory objects with stored objects</li>\n<li>IDs are cached</li>\n</ul>\n<h2 id=\"deleting-objects\">Deleting Objects</h2>\n<ul>\n<li>similar to updating objects</li>\n<li>Method <code class=\"language-text\">ObjectContainer.delete(...)</code> removes objects</li>\n</ul>\n<h2 id=\"simple-vs-complex-objects\">Simple vs. Complex Objects</h2>\n<ul>\n<li>Simple Structured Objects (objects in classical sense):\n<ul>\n<li>properties</li>\n<li>methods</li>\n</ul>\n</li>\n<li>Complex Object Structures: multivalued attrivutes\n<ul>\n<li>arrays</li>\n<li>collections</li>\n<li>…</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"simple-structured-objects\">Simple Structured Objects</h2>\n<ul>\n<li>New objects are stored using the <code class=\"language-text\">store</code> method\n<ul>\n<li>Persistence by reachability\n<ul>\n<li>Object graph is traversed, each referenced object is stored</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Updating objects with <code class=\"language-text\">store</code> method\n<ul>\n<li>Update depth <em>1</em> by default</li>\n<li>Only primitives and strings are updated</li>\n<li>No traversal of object graph (performance)</li>\n</ul>\n</li>\n<li>Deleting objects with <code class=\"language-text\">delete</code> method\n<ul>\n<li>Not cascaded by default</li>\n<li>Referenced objects have to be deleted manually</li>\n<li>Cascading delete can be configured for individual classes</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"updating-simple-structured-objects\">Updating Simple Structured Objects</h3>\n<ul>\n<li>Cascading updates are configured per class with <code class=\"language-text\">ObjectClass.cascadeOnUpdate(..)</code></li>\n<li>Update depth can be configured\n<ul>\n<li><code class=\"language-text\">ExtObjectContainer.store(object, depth)</code> updates referenced objects to given depth</li>\n<li><code class=\"language-text\">ObjectClass.updateDepth(depth)</code> defines update depth for a class (and all its objects)</li>\n<li><code class=\"language-text\">Configuration.updateDepth(depth)</code> sets global update depth for all objects</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"deleting-simple-structured-objects\">Deleting Simple Structured Objects</h3>\n<ul>\n<li>Cascading deletes similar to cascading updates\n<ul>\n<li>configured per object class</li>\n<li><code class=\"language-text\">CommonConfiguration.objectClass (...)</code></li>\n<li><code class=\"language-text\">ObjectClass.cascadeOnDelete(..)</code></li>\n<li>What happens if deleted objects referenced elsewhere???</li>\n<li>Cache and disk can become inconsistent when deleting objects\n<ul>\n<li><code class=\"language-text\">ExtObjectContainer.refresh(..)</code> syncs objects</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"object-hierarchies\">Object Hierarchies</h2>\n<ul>\n<li>Complex object structures are handled automatically\n<ul>\n<li>hierarchies, composite hierarchies</li>\n<li>inverse associations</li>\n<li>inheritance and interfaces</li>\n<li>multi-valued attributes, arrays and collections</li>\n</ul>\n</li>\n<li>db4o database-aware collections\n<ul>\n<li><code class=\"language-text\">ArrayList4</code> and <code class=\"language-text\">ArrayMap4</code> implement Collections API</li>\n<li>as part of transparent persistence/activation framework\n<ul>\n<li><code class=\"language-text\">ActivatableArrayList</code>, <code class=\"language-text\">ActivatableHashMap</code>, …</li>\n</ul>\n</li>\n<li>complex object implementation becomes <em>db4o dependent</em></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"transparent-persistence\">Transparent Persistence</h2>\n<ul>\n<li>Persistence should be transparent to application logic\n<ul>\n<li>Store objects in database <em>once</em> (<code class=\"language-text\">store</code> method)</li>\n<li>avoid multiple calls of <code class=\"language-text\">store</code></li>\n</ul>\n</li>\n<li>Logic of transparent persistence framework\n<ul>\n<li><code class=\"language-text\">Activatable</code> interface (no datatype orthogonality)</li>\n<li>objects are made persistent by <code class=\"language-text\">store</code> method</li>\n<li>objects bound to transparent persistence framework with <code class=\"language-text\">bind</code>method</li>\n<li>commit: transparent persistent framework scans for modified objects and invokes <code class=\"language-text\">store</code></li>\n</ul>\n</li>\n</ul>\n<p>Enabling transparent persistence</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">config<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">TransparentPersistenceSupport</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"activation\">Activation</h2>\n<ul>\n<li>Activation controls depth of loaded fields\n<ul>\n<li>field values (objects) are loaded in memory to a certain depth when query retrieves objects</li>\n<li>activation depth: length of reference chain</li>\n<li>fields beyond activation depth: default value (e.g <code class=\"language-text\">null</code>)</li>\n</ul>\n</li>\n<li>Activation cases\n<ul>\n<li><code class=\"language-text\">ObjectSet.next(...)</code> called on an query result</li>\n<li>explicit <code class=\"language-text\">ObjectContainer.activate(...)</code></li>\n<li>db4o collection element accessed</li>\n<li>members of Java collections are activated automatically when collection is activated</li>\n</ul>\n</li>\n<li>Controlling activation\n<ul>\n<li>default depth: 5</li>\n<li><code class=\"language-text\">ObjectContainer.activate(..)</code> and <code class=\"language-text\">ObjectContainer.deactivate()</code></li>\n</ul>\n</li>\n<li>per class configuration</li>\n</ul>\n<p>Methods for per class configuration of activation depth</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">ObjectClass</span>#<span class=\"token function\">minimumActivationDepth</span><span class=\"token punctuation\">(</span>minDepth<span class=\"token punctuation\">)</span>\n<span class=\"token class-name\">ObjectClass</span>#<span class=\"token function\">maximumActivationDepth</span><span class=\"token punctuation\">(</span>maxDepth<span class=\"token punctuation\">)</span>\n<span class=\"token class-name\">ObjectClass</span>#<span class=\"token function\">cascadeOnActivate</span><span class=\"token punctuation\">(</span>bool<span class=\"token punctuation\">)</span>\n<span class=\"token class-name\">ObjectClass</span>#<span class=\"token function\">objectField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">cascadeOnActivate</span><span class=\"token punctuation\">(</span>bool<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"transparent-activation\">Transparent Activation</h3>\n<ul>\n<li>Make activation transparent to application logic\n<ul>\n<li>activate fields automatically when accessed</li>\n</ul>\n</li>\n<li>Logic of transparent activation framework\n<ul>\n<li><code class=\"language-text\">Activable</code> interface (no datatype orthogonality)</li>\n<li>at object instantiation db registers itself in object with <code class=\"language-text\">bind(..)</code></li>\n</ul>\n</li>\n</ul>\n<p>Enabling the transparent activation framework</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">config<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">TransparentActivationSupport</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"db4o-transactions\">db4o Transactions</h2>\n<ul>\n<li>ACID</li>\n<li>Data transaction journaling\n<ul>\n<li>no data loss in case of system failure</li>\n<li>automatic data recovery after system failure</li>\n</ul>\n</li>\n<li>thread-safe for simultaneous interactions</li>\n<li>all work in <code class=\"language-text\">ObjectContainer</code>is transactional\n<ul>\n<li>transaction started when container opened</li>\n<li>current transaction committed when container closed</li>\n<li>explicit commit and rollback possible\n<ul>\n<li><code class=\"language-text\">ObjectContainer.commit(...)</code></li>\n<li><code class=\"language-text\">ObjectContainer.rollback(...)</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"configuration-1\">Configuration</h2>\n<ul>\n<li>Embedded\n<ul>\n<li><code class=\"language-text\">Db4oEmbedded.newConfiguration()</code></li>\n</ul>\n</li>\n<li>Client/Server\n<ul>\n<li><code class=\"language-text\">Db4oClientServer.newClientConfiguration()</code></li>\n<li><code class=\"language-text\">Db4oClientServer.newServerConfiguration()</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"external-tools\">External tools</h2>\n<ul>\n<li>performance tuning</li>\n<li>database diagnostics</li>\n<li>Indexes\n<ul>\n<li>optimize query evaluation</li>\n</ul>\n</li>\n<li>Defragment\n<ul>\n<li>removes unused fields, classes, management information</li>\n<li>compacts db file, faster access</li>\n<li>command line interface or from application</li>\n</ul>\n</li>\n<li>Statistics\n<ul>\n<li>queries</li>\n<li>objects: stored, retrieved, activated, …</li>\n<li>I/O, Network, …</li>\n</ul>\n</li>\n<li>Logger\n<ul>\n<li>logs objects in db</li>\n<li>logs objects of a given class</li>\n<li>run from command line</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"indexes\">Indexes</h2>\n<ul>\n<li>Trade-off between\n<ul>\n<li>increased query performance</li>\n<li>decreased storage, update and delete performance</li>\n</ul>\n</li>\n<li>Set by configuration or annotation (<code class=\"language-text\">@Indexed</code>)</li>\n<li>B-Tree based indexes on single object fields</li>\n</ul>\n<h2 id=\"tuning-for-speed\">Tuning for Speed</h2>\n<ul>\n<li>Heuristic to improve performance\n<ul>\n<li>weak references</li>\n<li>BTree node size</li>\n<li>free-space manager</li>\n<li>locking</li>\n<li>flushing</li>\n<li>callbacks</li>\n<li>caches</li>\n<li>…</li>\n</ul>\n</li>\n<li>Object loading\n<ul>\n<li>use appropriate activation depth</li>\n<li>use multiple object or session containers</li>\n<li>disable weak references if not required</li>\n</ul>\n</li>\n<li>Database tests\n<ul>\n<li>disable detection of schema changes</li>\n<li>disable instantiation tests of persistence classes at start-up</li>\n</ul>\n</li>\n<li>Query evaluation\n<ul>\n<li>set field indexes on most used objects to improve searches</li>\n<li>optimize native queries</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"distribution-and-replication\">Distribution and Replication</h2>\n<ul>\n<li>Embedded mode\n<ul>\n<li>DB accessed by clients in same <em>JVM</em></li>\n<li>direct file access: 1 user and 1 thread at a time</li>\n<li>client session: 1 user and multiple threads</li>\n<li>Database file opened, locked and accessed directly\n<ul>\n<li><code class=\"language-text\">Db4oEmbedded.openFile(configuration, name)</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Client/Server mode\n<ul>\n<li>Clients in multiple <em>JVMs</em></li>\n<li>DB access on server</li>\n<li>Client opens TCP/IP connection to server\n<ul>\n<li><code class=\"language-text\">Db4oClientServer.openServer(filename, port)</code></li>\n<li><code class=\"language-text\">Db4oClientServer.openClient(host, port, user, pass)</code></li>\n</ul>\n</li>\n<li>Client sends query, insert, update and delete instructions to server</li>\n<li>Client receives data from the server</li>\n</ul>\n</li>\n<li>Replication\n<ul>\n<li>redundant copies of database on multiple servers</li>\n<li>changes replicated form <em>master</em> to <em>client</em> servers</li>\n<li>several forms of replication supported\n<ul>\n<li>snapshot replication</li>\n<li>transactional replication</li>\n<li>merge replication</li>\n</ul>\n</li>\n<li>needs to be coded into application\n<ul>\n<li>cannot be configured on admin level</li>\n<li>replication only on demand</li>\n<li>client/server semantics introduced by developer</li>\n<li>one interface for all forms of replication</li>\n</ul>\n</li>\n<li>Replication Modes\n<ul>\n<li>Snapshot Replication\n<ul>\n<li>Snapshots of master replicated to client</li>\n<li>state-based</li>\n<li>periodical schedule</li>\n<li>special SODA query to detect all new and updated objects</li>\n</ul>\n</li>\n<li>Transactional Replication\n<ul>\n<li>Changes synchronized after transaction</li>\n<li>operation based</li>\n<li>changes replicated immediately</li>\n<li>Single object replication with <code class=\"language-text\">ReplicationSession</code></li>\n</ul>\n</li>\n<li>Merge Replication\n<ul>\n<li>Changes from clients merged to central server</li>\n<li>Other clients updated to reflect changes</li>\n<li>Transactionally of on a periodic basis</li>\n<li>Typically if subscribers are occasionally offline</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Replication System\n<ul>\n<li>Separated from db4o core</li>\n<li>uni- or bidirectional replication</li>\n<li>Replication of relational databases based on Hibernate</li>\n<li>Supported replication providers\n<ul>\n<li>db4o → db4o</li>\n<li>db4o → Hibernate</li>\n<li>Hibernate → db4o</li>\n<li>Hibernate → Hibernate</li>\n</ul>\n</li>\n<li>3 steps required\n<ol>\n<li>Generating unique IDs and version numbers</li>\n<li>Creating a <code class=\"language-text\">ReplicationSession</code></li>\n<li>Replicating objects</li>\n</ol>\n</li>\n<li>Mode dependent on implementation</li>\n<li>Bidirectional by default\n<ul>\n<li>Unidirectional can be configured\n<ul>\n<li><code class=\"language-text\">ReplicationSession.setDirection(from, to)</code></li>\n</ul>\n</li>\n<li><code class=\"language-text\">ReplicationSession.replicate(object)</code> newer object transferred to DB</li>\n<li>Object granularity</li>\n</ul>\n</li>\n<li>Conflict handling has to be done by developer</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"callbacks\">Callbacks</h2>\n<ul>\n<li>Called in response to events\n<ul>\n<li>activate</li>\n<li>deactivate</li>\n<li>new</li>\n<li>update</li>\n<li>delete</li>\n</ul>\n</li>\n<li>Methods called before and after event\n<ul>\n<li><code class=\"language-text\">can...</code> called <em>before</em> event</li>\n<li><code class=\"language-text\">on...</code> called <em>after</em> event</li>\n</ul>\n</li>\n<li>Interface <code class=\"language-text\">ObjectCallbacks</code></li>\n<li>Use Cases\n<ul>\n<li>Recording or preventing updates\n<ul>\n<li><code class=\"language-text\">canUpdate()</code> and <code class=\"language-text\">onUpdate()</code></li>\n</ul>\n</li>\n<li>Setting default values after <em>refactoring</em>\n<ul>\n<li><code class=\"language-text\">canNew()</code></li>\n</ul>\n</li>\n<li>Checking object integrity before storing objects\n<ul>\n<li><code class=\"language-text\">canNew()</code> and <code class=\"language-text\">canUpdate()</code></li>\n</ul>\n</li>\n<li>Restoring state when objects activated\n<ul>\n<li>Update UI, restore network connections, …</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"object-instantiation\">Object Instantiation</h2>\n<ul>\n<li>Three different techniques for instantiation\n<ol>\n<li>Constructor</li>\n<li>Bypassing Constructor</li>\n<li>Translator</li>\n</ol>\n</li>\n<li>Bypassing Constructor is default (if available)</li>\n<li>Can be configured globally or per class</li>\n<li>Constructors\n<ul>\n<li>db4o tries first default constructor</li>\n<li>if not public default constructor available\n<ul>\n<li>all constructors are tested to create instance</li>\n<li>default values (e. g <code class=\"language-text\">null</code>) passed as arguments</li>\n<li>first successfully tested constructor is used</li>\n<li>if no instance of a class can be created, object can’t be stored</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>Configuration interface:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// global setting (default: depends on environment)</span>\n<span class=\"token class-name\">CommonConfiguration</span>#<span class=\"token function\">callConstructors</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// per class setting (default: depends on environment)</span>\n<span class=\"token class-name\">CommonConfiguration</span>#<span class=\"token function\">objectClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">callConstructors</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// exceptions for debugging (default: true)</span>\n<span class=\"token class-name\">CommonConfiguration</span>#<span class=\"token function\">exceptionsOnNotStorable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>Bypassing Constructors\n<ul>\n<li>Constructors that cannot handle default values or <code class=\"language-text\">null</code> must be bypassed</li>\n<li>platform specific mechanism</li>\n<li>Not all environments support this feature</li>\n<li>Default setting (if supported by environment)</li>\n<li>Breaks classes that rely on constructors being executed</li>\n</ul>\n</li>\n<li>Translators\n<ul>\n<li>needed if neither Constructors nor Bypassing Constructors can be used</li>\n<li>if constructor needed to populate transient members</li>\n<li>if constructor fails when called with default values</li>\n<li>Interfaces <code class=\"language-text\">ObjectTranslator</code> and <code class=\"language-text\">ObjectConstructor</code></li>\n</ul>\n</li>\n<li>Type Handles\n<ul>\n<li>instead of Translators at lower level</li>\n<li>type handler registered for class that it handles</li>\n<li>write to and read from byte-arrays</li>\n</ul>\n</li>\n</ul>\n<!-- End Slides/Notes Week 5/6 ? -->\n<!-- Start Slides/Notes Week 7 -->\n<h1 id=\"versant\">Versant</h1>\n<ul>\n<li>Highly scalable</li>\n<li>Distributed</li>\n<li>Many platforms and programming languages\n<ul>\n<li>C, C++, Java</li>\n</ul>\n</li>\n<li>db4o acquired by Versant</li>\n<li>Lot of features</li>\n<li>easy to use</li>\n<li>Full Persistence Orthogonality\n<ul>\n<li>but code is injected (into byte-code)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"indexing\">Indexing</h2>\n<ul>\n<li>Like SQL</li>\n<li>Point/Range queries</li>\n<li>Index structures for Relational DBs not ideal for Subtyping\n<ul>\n<li><em>Polymorphic indexes</em> in Versant</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"architecture\">Architecture</h2>\n<ul>\n<li>Always network based\n<ul>\n<li>no embedded option (as db4o)</li>\n</ul>\n</li>\n<li>Client\n<ul>\n<li>Versant Manager</li>\n<li>Object cache</li>\n<li>Application logic</li>\n</ul>\n</li>\n<li>Versant Server\n<ul>\n<li>possible to use multiple servers</li>\n<li>Access to data\n<ul>\n<li>Volumes (page cache)</li>\n</ul>\n</li>\n<li>Logical log file</li>\n<li>Physical log file</li>\n</ul>\n</li>\n<li>Dual cache\n<ul>\n<li>Object cache (client)</li>\n<li>Page cache (server)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"database-volumes\">Database Volumes</h2>\n<ul>\n<li>System Volume (created automatically)\n<ul>\n<li>Class descriptions</li>\n<li>Object instances</li>\n</ul>\n</li>\n<li>Data Volumes (optional)\n<ul>\n<li>Increase database capacity</li>\n<li>Partition data</li>\n</ul>\n</li>\n<li>Logical Log Volume (created automatically)\n<ul>\n<li>Transactions and redo information</li>\n<li>For recovery and rollback</li>\n</ul>\n</li>\n<li>Physical Log Volume (created automatically)\n<ul>\n<li>Physical data information</li>\n<li>For recovery and rollback</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"versant-manager\">Versant Manager</h2>\n<ul>\n<li>Presents objects to app</li>\n<li>Caches objects in virtual memory</li>\n<li>Manages transactions</li>\n<li>Distributes queries and updates to servers</li>\n<li>Conversion between Versant DB format and client machine format</li>\n</ul>\n<h2 id=\"cache\">Cache</h2>\n<ul>\n<li>Cached Object Descriptor Table</li>\n<li>Map from <em>logical object identifier</em> (LOID) to object in memory\n<ul>\n<li>attributes pointing to other object: access object in memory or DB</li>\n</ul>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 470px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ffff68f8ae77e2418a81b8255fba329f/f96db/versant_cache.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.77215189873418%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABJklEQVQY022R0a6CMAyGff9nMl4YjVEvFJwoBMWMRawwMplhQDd2gjsx5hy/i7ZJ/z9t2lH/DftB3/fGmK+ykUvvtjGGMUYI8X1/u916npfnOedcKfVpc/qRS9Za88JamyTJcrlcr9ez2YxSiohlWVZVZa3VL5xsMGutT6fTeDw+n8+HwwEAbrdbEASbzYYxppSSUjLGpJRCiMfjIYTgnAMAIg7mMAwnk8lut6OUKqWEEFEUEULqukZErXWe50EQXK/XJEniOG6ahnMupRzWbtvWxa7rtNZVVaVput/vi6K4XC5lWd7v9yzLGGPT6XQ+n8dxDACD+c9tEREAwjBcrVae5y0Wi+PxSCmt6/r5fBZFAQBZlv2u/f8B75M4jDGI6Ga47rv+Ab8vwigdLQjjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Nested Index\"\n        title=\"Nested Index\"\n        src=\"/static/ffff68f8ae77e2418a81b8255fba329f/f96db/versant_cache.png\"\n        srcset=\"/static/ffff68f8ae77e2418a81b8255fba329f/c26ae/versant_cache.png 158w,\n/static/ffff68f8ae77e2418a81b8255fba329f/6bdcf/versant_cache.png 315w,\n/static/ffff68f8ae77e2418a81b8255fba329f/f96db/versant_cache.png 470w\"\n        sizes=\"(max-width: 470px) 100vw, 470px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<table>\n<thead>\n<tr>\n<th>pointer</th>\n<th>LOID</th>\n<th>Meaning</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>NULL</td>\n<td>NULL</td>\n<td>object deleted?</td>\n</tr>\n<tr>\n<td>not NULL</td>\n<td>NULL</td>\n<td>not saved persistently</td>\n</tr>\n<tr>\n<td>NULL</td>\n<td>not NULL</td>\n<td>not loaded in cache</td>\n</tr>\n<tr>\n<td>not NULL</td>\n<td>not NULL</td>\n<td>in DB and in cache</td>\n</tr>\n</tbody>\n</table>\n<p>Other entries:</p>\n<ul>\n<li>locking information</li>\n<li>state information</li>\n<li>…</li>\n</ul>\n<h2 id=\"versant-server\">Versant Server</h2>\n<ul>\n<li>Object retrieval (disk and page cache)</li>\n<li>Transactions and locks</li>\n<li>Logging and recovery</li>\n<li>Indexing</li>\n</ul>\n<p>Versant doesn’t have the notion of activation. Data is retrieved automatically\nwhen dereferencing pointers.</p>\n<h2 id=\"processes-sessions-and-transactions\">Processes, Sessions and Transactions</h2>\n<ul>\n<li>Session (same as ObjectContainer in db4o)\n<ul>\n<li>On client side</li>\n<li>Represents database instance</li>\n<li>Container</li>\n<li>A session object is always bound to one <em>single transaction</em></li>\n<li>It’s possible to have multiple threads attached to one session\n<ul>\n<li>This is dangerous!</li>\n<li>Not transaction support</li>\n</ul>\n</li>\n<li>Multiple sessions within separate threads</li>\n<li>or multiple session in one thread</li>\n<li>Each session object on the client is bound to one transaction thread in the server\n<ul>\n<li>Transaction (ACID) support</li>\n</ul>\n</li>\n<li>The server thread accesses the page cache</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"java-versant-interface\">Java Versant Interface</h2>\n<ul>\n<li>Easy-to-use storage of persistent Java objects\n<ul>\n<li>pure Java (syntax and semantics)</li>\n<li>instances of nearly all classes can be stored (and accessed)</li>\n<li>works with Java GC</li>\n</ul>\n</li>\n<li>Client-server architecture\n<ul>\n<li>access to the Versant object DB</li>\n<li>client libs cache objects for faster access</li>\n<li>DB queries are executed on server</li>\n</ul>\n</li>\n<li>Configuration and code-generation integrated in build process</li>\n</ul>\n<h2 id=\"jvi-layers\">JVI Layers</h2>\n<p>Versant provides different API layers.\nThe fundamental layer is usually not directly needed by the application developer.</p>\n<h3 id=\"fundamental-layer\">Fundamental Layer</h3>\n<ul>\n<li>\n<p>DB centric</p>\n</li>\n<li>\n<p>Create ‘Meta-classes’</p>\n</li>\n<li>\n<p>Objects manipulated indirectly through handles</p>\n</li>\n<li>\n<p>package <code class=\"language-text\">com.versant.fund</code></p>\n</li>\n<li>\n<p>Query classes <code class=\"language-text\">FundQuery</code> and <code class=\"language-text\">FundQueryResult</code></p>\n</li>\n<li>\n<p>Create wrapper code for real classes (reflection)</p>\n</li>\n</ul>\n<h3 id=\"transparent-layer\">Transparent Layer</h3>\n<ul>\n<li>language centric</li>\n<li>usually used by developer</li>\n<li>code is injected to application code</li>\n<li>build on top of fundamental layer</li>\n<li>package <code class=\"language-text\">com.versant.trans</code></li>\n<li>Java classes are mapped to objects in fundamental layer</li>\n<li>Persistent objects are cached in memory</li>\n<li>For persistent objects retrieved from a DB Java objects are constructed (in memory)</li>\n</ul>\n<h4 id=\"first-and-second-class-objects\">First and Second Class Objects</h4>\n<p>Versant distinguishes first class and second class objects</p>\n<ul>\n<li>Configured externally in a file</li>\n<li>Configured on class basis</li>\n<li>First Class Objects (FCO)\n<ul>\n<li>main objects that can be saved and retrieved independently</li>\n<li>have a Logical Object Identifier (LOID)</li>\n<li>changes are saved automatically (independence)</li>\n<li>strong entities</li>\n</ul>\n</li>\n<li>Second Class Objects (SCO)\n<ul>\n<li>can be saved only as part of an FCO</li>\n<li>can’t be results of queries</li>\n<li>can be part of first class objects</li>\n<li>stored as binary array</li>\n<li>weak entity</li>\n<li>used for optimization</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"persistence-categories\">Persistence Categories</h4>\n<ul>\n<li>\n<p>can be configured on class basis</p>\n</li>\n<li>\n<p>First class objects</p>\n<ul>\n<li>Persistent always (<em>p</em>)\n<ul>\n<li>becomes persistent at instantiation (independence)</li>\n<li>marked as dirty when modified</li>\n</ul>\n</li>\n<li>Persistence capable (<em>c</em>)\n<ul>\n<li>new instances are transient but can become persistent</li>\n<li>marked as dirty when modified</li>\n</ul>\n</li>\n<li>Super-class of <em>p</em> or <em>c</em> must also be <em>p</em> or <em>c</em> respectively</li>\n</ul>\n</li>\n<li>\n<p>Second class objects</p>\n<ul>\n<li>Transparent dirty owner (<em>d</em>)\n<ul>\n<li>changes to object automatically mark the owner object as dirty</li>\n<li>works only when the owner is stored (FCO)</li>\n</ul>\n</li>\n<li>Persistence aware (<em>a</em>)\n<ul>\n<li>for code that is aware of FCO</li>\n<li>code needs to mark manually the FCO as dirty</li>\n</ul>\n</li>\n<li>Not persistent (<em>n</em>)\n<ul>\n<li>no managed by Versant system</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"persistence-and-navigation\">Persistence and Navigation</h4>\n<ul>\n<li>Persistence by reachability is provided</li>\n<li>Database root\n<ul>\n<li>persist the root of an object graph</li>\n<li>name it (for retrieving it later)</li>\n<li>Methods <code class=\"language-text\">makeRoot()</code>, <code class=\"language-text\">deleteRoot()</code> and <code class=\"language-text\">findRoot()</code></li>\n</ul>\n</li>\n<li>Transparent navigation\n<ul>\n<li>‘activation’ handled automatically and lazy</li>\n<li>objects are transparently locked and retrieved</li>\n<li>works across DB boundaries</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"omdg-layer\">OMDG Layer</h3>\n<ul>\n<li>language centric</li>\n<li>ODMG database, transactions, collections</li>\n<li>build on transparent layer</li>\n<li>packages <code class=\"language-text\">com.versant.odmg</code> and <code class=\"language-text\">com.versant.odmg</code></li>\n</ul>\n<h2 id=\"application-development\">Application Development</h2>\n<ul>\n<li>Develop Java classes\n<ul>\n<li>make code ‘persistence aware’</li>\n<li>sessions, transactions, concurrency</li>\n</ul>\n</li>\n<li>Create configuration file\n<ul>\n<li>specify persistence category for each Java class</li>\n</ul>\n</li>\n<li>Compile</li>\n<li>Run enhancer to make byte-code changes\n<ul>\n<li>persistence behavior inherited from <code class=\"language-text\">com.versant.trans.Persistent</code></li>\n<li>explicit at compile time or</li>\n<li>implicit at run time (class loader)</li>\n</ul>\n</li>\n<li>create DB</li>\n<li>Run application</li>\n</ul>\n<h2 id=\"byte-code-enhancement\">Byte-code Enhancement</h2>\n<ul>\n<li>Code which creates schema object in DB</li>\n<li>Code for writing and reading to and from DB</li>\n<li>Code for accessing attribute values</li>\n</ul>\n<h2 id=\"object-lifecycle\">Object Lifecycle</h2>\n<ul>\n<li>Creation of persistent objects\n<ul>\n<li>Java objects in memory</li>\n<li>Each object has internal DB information in object cache</li>\n</ul>\n</li>\n<li>Commit\n<ul>\n<li>Object data written to DB</li>\n<li>Proxy Java objects retained in memory</li>\n</ul>\n</li>\n<li>Rollback\n<ul>\n<li>New database objects will be dropped</li>\n</ul>\n</li>\n<li>Querying\n<ul>\n<li>Queries are passed to DB server</li>\n<li>Proxy object for every object in result</li>\n</ul>\n</li>\n<li>Accessing objects\n<ul>\n<li>Objects are fetched or de-serialized transparently</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"versant-collections\">Versant Collections</h2>\n<ul>\n<li>Standard collection classes can’t be byte-code enhanced</li>\n<li>Special collection classes for <em>FCO</em>s and <em>SCO</em>s</li>\n<li>Scalable large collections (<em>FCO</em>)</li>\n<li>OMDG collections (are <em>FCO</em>s)\n<ul>\n<li>additional query facilities</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"versant-query-language-vql\">Versant Query Language (VQL)</h2>\n<ul>\n<li>Subset of OQL (ODMG)</li>\n<li>Similar to SQL</li>\n<li>Executed on server</li>\n<li>Can be parameterised\n<ul>\n<li>prepared statements</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"event-notification-and-persistent-object-hooks\">Event Notification and Persistent Object Hooks</h2>\n<ul>\n<li>Like callbacks in db4o</li>\n<li>Event Notification\n<ul>\n<li>Propagation of events from DB to client</li>\n<li>Event types\n<ul>\n<li>class: create, modify or delete an instance</li>\n<li>object: modify or delete object or group of objects</li>\n<li>transactions: begin or end of transaction</li>\n<li>user-defined events</li>\n</ul>\n</li>\n<li>package <code class=\"language-text\">com.versant.event</code></li>\n</ul>\n</li>\n<li>Persistent Object Hooks\n<ul>\n<li>Allow intervention of state transitions</li>\n<li><code class=\"language-text\">activate()</code>, <code class=\"language-text\">deactivate()</code></li>\n<li><code class=\"language-text\">preRead(boolean act)</code> and <code class=\"language-text\">postRead(boolean act)</code></li>\n<li><code class=\"language-text\">preWrite(boolean deAct)</code> and <code class=\"language-text\">postWrite(boolean deAct)</code></li>\n<li><code class=\"language-text\">vDelete()</code>: can be used to maintain referential integrity (cascading delete)</li>\n</ul>\n</li>\n</ul>\n<!-- End of Notes/Slides Week 7 -->\n<!-- Start Notes/Slides Week 8 -->\n<h1 id=\"objectstore\">ObjectStore</h1>\n<h2 id=\"general-topics-of-persistence\">General Topics of Persistence</h2>\n<ul>\n<li>Orthogonal persistence is not always desired (UI, messages, …)</li>\n<li>Persistence identification: do we need to explicit store/retrieve objects</li>\n<li>Possibility to select what is in DB and what is in memory</li>\n<li>Declarative query language\n<ul>\n<li>what, not how</li>\n<li>more power-full</li>\n<li>easy to use</li>\n<li>more expressive</li>\n</ul>\n</li>\n<li>Difference between\n<ul>\n<li>persistent always: stored automatically</li>\n<li>persistent capable: needs to be stored explicitly</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"architecture-1\">Architecture</h2>\n<ul>\n<li>C++ and Java</li>\n<li>Client/Server application</li>\n<li>Lightweight and professional editions available</li>\n<li>Based on virtual memory mapping\n<ul>\n<li>pages</li>\n<li>cache forward architecture (very performant)</li>\n</ul>\n</li>\n<li>Virtual memory mapping architecture (extends operating system)\n<ul>\n<li>logical vs. physical address</li>\n<li>page fault</li>\n<li>address translation</li>\n</ul>\n</li>\n<li>Characteristics (ObjectStore)\n<ul>\n<li>virtual</li>\n<li>shared</li>\n<li>distributed</li>\n<li>heterogeneous</li>\n<li>persistent</li>\n<li>transactional</li>\n</ul>\n</li>\n<li>Logical vs. physical address\n<ul>\n<li>data is referenced uniquely using a 4-part key\n<ol>\n<li>database</li>\n<li>segment</li>\n<li>cluster</li>\n<li>offset (in cluster)</li>\n</ol>\n</li>\n<li>theoretical address space to <span class=\"math math-inline\"><span class=\"katex\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>128</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^{128}</annotation></semantics></math></span></span></li>\n<li>Reserved virtual memory region for persistence: Persistent Storage Region (<em>PSR</em>)</li>\n</ul>\n</li>\n<li>Physical memory and secondary storage\n<ul>\n<li>all data accessed by client must be in <em>PSR</em></li>\n<li>cache hold recently accessed data even across transactions</li>\n</ul>\n</li>\n<li>Data is cached on different levels</li>\n<li>Granularity: pages</li>\n<li>close to persistence capable (in Versant)\n<ul>\n<li>overloaded <code class=\"language-text\">new</code> operator</li>\n<li>instance based persistence</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"virtual-memory-mapping-architecture\">Virtual Memory Mapping Architecture</h2>\n<ul>\n<li>Page faults\n<ul>\n<li>ObjectStore maps data into app when page fault occurs</li>\n<li>data is paged into memory from cache if not in <em>PSR</em> or fetched from server if not in cache</li>\n</ul>\n</li>\n<li>Address translation\n<ul>\n<li>done when data is fetched into cache</li>\n<li>re-translation can occur (when <em>PSR</em> gets full)</li>\n<li>trade-off\n<ul>\n<li>nice to have the ability to use direct SW pointers</li>\n<li>translating pointers has scalability implications</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"server-side-components\">Server Side Components</h2>\n<ul>\n<li>Server\n<ul>\n<li>Enforces ACID using ‘page permits’</li>\n<li>co-operation between servers with two-phase commits</li>\n<li>automatic recovery mechanism</li>\n</ul>\n</li>\n<li>Database\n<ul>\n<li>managed by one server\n<ul>\n<li>one server can manage multiple DBs (distribution)</li>\n</ul>\n</li>\n<li>binary files storing pages of memory containing C++ objects</li>\n</ul>\n</li>\n<li>Transaction log\n<ul>\n<li>each server owns transaction log</li>\n<li>pages only propagated to DB when transaction commits</li>\n<li>used for\n<ul>\n<li>automatic recovery</li>\n<li>faster commits</li>\n<li>Multi-version Concurrency Control (MVCC)</li>\n<li>…</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"client-side-components\">Client Side Components</h2>\n<ul>\n<li>Client\n<ul>\n<li>C++ program linked with ObjectStore libraries</li>\n<li>even Java programs using ObjectStore are embedded (session) in a C++ part</li>\n<li>interacts with DB</li>\n<li>pages automatically fetched from DB</li>\n</ul>\n</li>\n<li>Cache\n<ul>\n<li>one cache memory mapped file per client process</li>\n<li>pages fetched from DB are held in cache</li>\n<li>pages can be retained in cache between transactions</li>\n<li>Cache manager retrieves data from the server</li>\n</ul>\n</li>\n<li>meta-information (Commseg)\n<ul>\n<li>Commseg memory mapped file</li>\n<li>contains meta-information about pages in cache</li>\n<li>stores <em>permit</em> and <em>lock</em> for pages in cache</li>\n<li><em>permit</em>s can be retained between transactions</li>\n</ul>\n</li>\n<li>Cache manager\n<ul>\n<li>one manager per client machine</li>\n<li>shared by all clients on that machine</li>\n<li>handles permit revokes</li>\n<li>read/write cache and Commseg</li>\n<li>not directly involved in page fetch</li>\n</ul>\n</li>\n<li>Persistent Storage Region (<em>PSR</em>)\n<ul>\n<li>reserved area of virtual address space (in C++ part)</li>\n<li>addresses of persistent objects used by client are mapped to <em>PSR</em></li>\n<li>pointers of application will be in the range of the <em>PSR</em></li>\n<li>at end of transaction <em>PSR</em> is cleared\n<ul>\n<li>can be reused for next transaction</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"fetching-and-mapping-pages\">Fetching and Mapping Pages</h2>\n<ul>\n<li>Client automatically fetches and maps pages\n<ul>\n<li>‘lazy’ fetches</li>\n<li>held in client cache</li>\n</ul>\n</li>\n<li>Server <em>permits</em> and client <em>locks</em> acquired automatically\n<ul>\n<li>ensuring transaction consistency</li>\n</ul>\n</li>\n<li>Existing page can be swapped out\n<ul>\n<li>if not enough room in cache for new page</li>\n<li>updated pages are sent to the server</li>\n<li>read-only pages are dropped from cache (copy in DB)</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"fetching-and-mapping-sequence\">Fetching and Mapping Sequence</h3>\n<ul>\n<li>ObjectStore installs <code class=\"language-text\">SIGSEGV</code> (segmentation fault) handler</li>\n<li>Program obtains pointer <code class=\"language-text\">p</code> to object on page <em>x</em></li>\n<li>Dereferencing <code class=\"language-text\">p</code> causes <code class=\"language-text\">SIGSEGV</code> handler to be called</li>\n<li>Virtual mapping table is consulted</li>\n<li>Page is fetched from server and stored in cache</li>\n<li>Page <em>x</em> is mapped to address space</li>\n<li>Execution continues</li>\n</ul>\n<h2 id=\"cache-forward-architecture\">Cache-Forward Architecture</h2>\n<ul>\n<li>To provide <em>high performance</em> in ObjectStore\n<ul>\n<li>data cached across transaction boundaries</li>\n<li>number of used locks is reduces</li>\n<li>cached data kept in globally consistent state</li>\n</ul>\n</li>\n<li>Two types of locks on pages\n<ul>\n<li><em>transaction locks</em>: represents state of page during transaction</li>\n<li><em>ownership permits</em>: represents state of page in cache</li>\n</ul>\n</li>\n<li><em>Permits</em> are tracked by <em>server</em>\n<ul>\n<li>server serves permits on pages that are sent to client</li>\n</ul>\n</li>\n<li><em>Locks</em> are taken by <em>client</em>\n<ul>\n<li>client can lock pages according to given permit</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"shared-virtual-memory\">Shared Virtual Memory</h2>\n<ul>\n<li>Lazy call-back mechanism for permits</li>\n<li>Server maintains table of permits for each client</li>\n<li>When client requests page from server\n<ul>\n<li>Server checks for other clients with permit for page (and permit type)</li>\n<li>Server issues call-back if one or more clients have conflicting permits</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"page-permits-and-locks\">Page Permits and Locks</h2>\n<ul>\n<li>Lock for client (locally)</li>\n<li>Permission for server (globally)</li>\n<li>Read permit\n<ul>\n<li>client can lock page for reading <em>without consulting server</em></li>\n<li>many clients can hold a read permit for the same page</li>\n</ul>\n</li>\n<li>Write permit\n<ul>\n<li>client can lock page for reading or writing <em>without asking server</em></li>\n<li>only one client can hold a write permit for a page at any given time</li>\n</ul>\n</li>\n<li>Cache manager inspects permit and lock status for call-back\n<ul>\n<li>✓: Positive</li>\n<li>✗: Negative, but permit is flagged to be revoked at transaction end</li>\n</ul>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>Permit</th>\n<th>Lock</th>\n<th>Response</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>read</td>\n<td>read</td>\n<td>✗ server only calls back permit of other client needs to write</td>\n</tr>\n<tr>\n<td>read</td>\n<td>no lock</td>\n<td>✓</td>\n</tr>\n<tr>\n<td>write</td>\n<td>read</td>\n<td>✓ permit for page downgraded to read</td>\n</tr>\n<tr>\n<td>write</td>\n<td>write</td>\n<td>✗</td>\n</tr>\n<tr>\n<td>write</td>\n<td>no lock</td>\n<td>✓</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>Pages on server are fetched with permission (read or write)</li>\n<li>Local locks don’t tell server about lock/un-lock about after transaction</li>\n</ul>\n<h2 id=\"distribution-and-heterogeneity\">Distribution and Heterogeneity</h2>\n<ul>\n<li>Clients can access objects in different remote DBs in one transaction</li>\n<li>Clients and servers can run on different platforms\n<ul>\n<li>Win</li>\n<li>Linux</li>\n<li>Unix</li>\n<li>…</li>\n</ul>\n</li>\n<li>Physical object layout is transformed automatically\n<ul>\n<li>by client</li>\n<li>at run-time</li>\n<li>when page is mapped into cache</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"persistence-1\">Persistence</h2>\n<ul>\n<li>persistence by instantiation in C++</li>\n<li>Overloaded persistent <code class=\"language-text\">new</code> operator</li>\n<li>Several options for object allocation\n<ul>\n<li>transiently on the heap</li>\n<li>DB</li>\n<li>segment</li>\n<li>cluster</li>\n<li>…</li>\n</ul>\n</li>\n<li>Persistence is orthogonal to the type of an object (data-type orthogonality)</li>\n</ul>\n<h2 id=\"transactions\">Transactions</h2>\n<ul>\n<li>Basic ACID properties</li>\n<li>Atomicity\n<ul>\n<li>after commit: guaranteed that data was written and is recoverable</li>\n<li>after abort: changes are undone</li>\n</ul>\n</li>\n<li>Consistency\n<ul>\n<li>it’s impossible to apply or lose update while data is written</li>\n</ul>\n</li>\n<li>Isolation\n<ul>\n<li>serialisability (CPSR) is guaranteed by 2-phase locking</li>\n<li>MVCC provides serialisability for read-only transactions (using snapshots)</li>\n</ul>\n</li>\n<li>Durability\n<ul>\n<li>changes are written to transaction log first</li>\n<li>background process propagates changes to DB</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"transaction-types\">Transaction Types</h3>\n<ul>\n<li>Read or Write</li>\n<li>Local or Global\n<ul>\n<li>local: only initiating thread is allowed</li>\n<li>global: allows all threads in a session to share transaction</li>\n</ul>\n</li>\n<li>Lexical or Dynamic transactions\n<ul>\n<li>Lexical transactions\n<ul>\n<li>automatically retry on lock</li>\n<li>must start and end in same code block</li>\n<li>always thread-local</li>\n</ul>\n</li>\n<li>Dynamic transactions\n<ul>\n<li>lower level of <code class=\"language-text\">os_transaction</code>class</li>\n<li>better suited for multi-threaded applications</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"database-layout\">Database Layout</h2>\n<ul>\n<li>Memory pages held in hierarchy of clusters in segments</li>\n<li>Segments\n<ul>\n<li>logical partitioning of objects</li>\n<li>Segment 0: schema segment\n<ul>\n<li>DB schema</li>\n<li>DB roots</li>\n</ul>\n</li>\n<li>Segment 2: default segment</li>\n<li>Segment 4: first user-created segment</li>\n<li>max <span class=\"math math-inline\"><span class=\"katex\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>32</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^{32}</annotation></semantics></math></span></span> segments per DB</li>\n</ul>\n</li>\n<li>Clusters\n<ul>\n<li>group closely related objects</li>\n<li>each segment has default cluster 0</li>\n<li>max <span class=\"math math-inline\"><span class=\"katex\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>31</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^{31}</annotation></semantics></math></span></span> clusters per segment</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"developing-applications-api\">Developing Applications (API)</h2>\n<ul>\n<li>\n<p>ObjectStore libraries</p>\n<ul>\n<li><code class=\"language-text\">objectstore</code>: run-time</li>\n<li><code class=\"language-text\">os_database</code>: DB management</li>\n<li><code class=\"language-text\">os_transactions</code>: transaction handles and functionality</li>\n<li><code class=\"language-text\">os_typespec</code>: determine type specification</li>\n<li><code class=\"language-text\">os_database_root</code>: manage roots</li>\n<li><code class=\"language-text\">os_segment</code>: segment access and management</li>\n<li><code class=\"language-text\">os_cluster</code>: cluster access and management</li>\n</ul>\n</li>\n<li>\n<p>Development process</p>\n<ul>\n<li>writing persistent classes, schema file, app logic</li>\n<li>compile schema file with <code class=\"language-text\">pssq</code> compiler</li>\n<li>compile classes with C++ compiler</li>\n<li>linking</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"managing-databases\">Managing Databases</h3>\n<ul>\n<li>provided by <code class=\"language-text\">os_database</code>\n<ul>\n<li><code class=\"language-text\">create()</code>: creates new DB</li>\n<li><code class=\"language-text\">open()</code>: opens DB</li>\n<li><code class=\"language-text\">save()</code>: saves DB, changes permanent</li>\n<li><code class=\"language-text\">close()</code>: closes DB, but doesn’t save stat</li>\n<li><code class=\"language-text\">destroy()</code>: deletes DB</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"transactions-1\">Transactions</h3>\n<ul>\n<li>provided by <code class=\"language-text\">os_transaction</code>\n<ul>\n<li>all interactions with DB must be in a transactions</li>\n<li>can be nested</li>\n</ul>\n</li>\n<li>defining and working with transactions\n<ul>\n<li>directly using <code class=\"language-text\">os_transaction</code> class (dynamic)</li>\n<li>using macros (lexical)</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"creating-persistent-objects\">Creating Persistent Objects</h3>\n<p>Use overloaded <code class=\"language-text\">new</code> operator:</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">os_database <span class=\"token operator\">*</span>db <span class=\"token operator\">=</span> os_database<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"publications.db\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nAuthor <span class=\"token operator\">*</span>scheel <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span>db<span class=\"token punctuation\">,</span> <span class=\"token class-name\">os_ts</span><span class=\"token operator\">&lt;</span>Author<span class=\"token operator\">></span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token function\">Author</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Matthias Geel\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndb<span class=\"token operator\">-></span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>It’s also possible to instantiate persistent array of objects.</p>\n<h3 id=\"updating-and-deleting-persistent-objects\">Updating and Deleting Persistent Objects</h3>\n<ul>\n<li>Changes to persistent objects are propagated to DB automatically\n<ul>\n<li>when pages are sent back to server</li>\n<li>client app updates memory-mapped persistent objects (using standard C++)</li>\n<li>persistent objects are deleted when memory-mapped objects are deleted (using standard C++)</li>\n</ul>\n</li>\n<li>Fully transparent to app developer</li>\n</ul>\n<h3 id=\"collections-and-relationships\">Collections and Relationships</h3>\n<ul>\n<li>Relationships between classes modeled as collections</li>\n<li>library of non-templated and templated collection types available</li>\n<li>traversal, manipulation, retrieval</li>\n<li>classes <code class=\"language-text\">os_collection</code>, <code class=\"language-text\">os_Collection&lt;E></code> and sub-classes</li>\n</ul>\n<p>Relationships:</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// Relationship to the customers orders:</span>\n<span class=\"token function\">os_relationship_m_1</span><span class=\"token punctuation\">(</span>Customer<span class=\"token punctuation\">,</span>orders<span class=\"token punctuation\">,</span>Order<span class=\"token punctuation\">,</span>customer<span class=\"token punctuation\">,</span>os_List<span class=\"token operator\">&lt;</span>Order<span class=\"token operator\">*</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> orders<span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>\n<p>Cursors over Collections</p>\n<ul>\n<li>used to navigate and manipulate collections</li>\n<li>class <code class=\"language-text\">os_Cursor</code></li>\n<li>cursors can be reused by rebinding to other collection</li>\n</ul>\n</li>\n<li>\n<p>Queries over Collections</p>\n<ul>\n<li>specify\n<ul>\n<li>element type</li>\n<li>query string</li>\n<li>schema DB</li>\n</ul>\n</li>\n<li>query string indicates selection criterion\n<ul>\n<li>in C++</li>\n<li>or pattern matching expression</li>\n</ul>\n</li>\n<li>function calls in query strings restricted to basic types</li>\n<li>nested queries supported</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"database-roots\">Database Roots</h2>\n<ul>\n<li>persistent objects with a well-known name</li>\n<li>class <code class=\"language-text\">os_database_root</code>\n<ul>\n<li>root name as <code class=\"language-text\">char *</code></li>\n<li>pointer to object as <code class=\"language-text\">void *</code></li>\n</ul>\n</li>\n</ul>\n<!-- End Notes/Slides Week 8 -->\n<!-- Start Slides/Notes Week 9 -->\n<!-- TODO Notes 0:00:00 -->\n<h1 id=\"objectivitydb\">Objectivity/DB</h1>\n<h2 id=\"key-features\">Key Features</h2>\n<ul>\n<li>Logical and physical pages\n<ul>\n<li>non-destructive manipulation</li>\n<li>simple rollback/commit</li>\n</ul>\n</li>\n<li>Relationships\n<ul>\n<li>bidirectional relationship outside of class</li>\n</ul>\n</li>\n<li>LINQ</li>\n<li>Parallel Query Engine</li>\n<li>Graph Navigator</li>\n<li>Core implemented in C++</li>\n<li>Language support\n<ul>\n<li>C++</li>\n<li>C#</li>\n<li>Java</li>\n<li>Smaltalk</li>\n<li>Python</li>\n<li>SQL++</li>\n<li>XML</li>\n</ul>\n</li>\n<li>Platform support\n<ul>\n<li>Windows</li>\n<li>Linux, Altix</li>\n<li>UNIX: Solaris, HP-UX, IBM RS/6000</li>\n<li>OS X</li>\n<li>32-bit and 64-bit</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"architecture-2\">Architecture</h2>\n<ul>\n<li>Client/Server</li>\n<li>Lock Servers</li>\n<li>Data Servers</li>\n<li>Query Servers (Parallel Query Engine)\n<ul>\n<li>task splitter</li>\n<li>multiple query server scanning portions of data in parallel</li>\n</ul>\n</li>\n<li>Client-side Objectivity Kernel</li>\n</ul>\n<h2 id=\"federation\">Federation</h2>\n<blockquote>\n<p>Federation > Database > Container > Objects</p>\n</blockquote>\n<ul>\n<li>A <em>Federation</em> contains several <em>DBs</em>.</li>\n<li>A <em>DB</em> contains several <em>Containers</em>.</li>\n<li>A <em>Container</em> contains several <em>Objects</em>.</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>Logical</th>\n<th>Physical</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Federation</td>\n<td>File</td>\n</tr>\n<tr>\n<td>Database</td>\n<td>Files</td>\n</tr>\n<tr>\n<td>Container</td>\n<td>Pages</td>\n</tr>\n<tr>\n<td>Objects</td>\n<td>Slots</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>Federated DB contains one or more DBs</li>\n<li>A DB file can be copied to other machine</li>\n</ul>\n<h2 id=\"databases\">Databases</h2>\n<ul>\n<li>Databases are files\n<ul>\n<li>contain objects in container</li>\n<li>up to 65530 databases per federation</li>\n<li>a database holds up to 65530 containers</li>\n</ul>\n</li>\n<li>can be moved or copied to any disk/machine</li>\n<li>can be marked read-only or taken off-line</li>\n</ul>\n<h2 id=\"containers\">Containers</h2>\n<ul>\n<li>Collections of objects in DB\n<ul>\n<li>contained objects can be of any size or type</li>\n<li>can grow up to 65530 pages</li>\n</ul>\n</li>\n<li>Useful for logical partitions\n<ul>\n<li>by owner</li>\n<li>by attribute</li>\n<li>by time</li>\n<li>…</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"pages\">Pages</h2>\n<ul>\n<li>Logical and Physical\n<ul>\n<li>logical page is permament part of object ID (OID)</li>\n<li>physical page is where the page is put in the file</li>\n</ul>\n</li>\n<li>Different age sizes possible</li>\n<li>Unit of transfer from disk or server</li>\n<li>Unit of locking\n<ul>\n<li>one writer</li>\n<li>multiple readers</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"logical-and-physical-pages\">Logical and Physical Pages</h3>\n<ul>\n<li>When page is modified\n<ul>\n<li>new page is written to container</li>\n<li>old page is kept</li>\n<li>journal file is written\n<ul>\n<li>containing current page map</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>When a transaction commits\n<ul>\n<li>page map is updated and written to disk</li>\n<li>old page is freed (for reuse)</li>\n<li>journal file is truncated</li>\n<li>lock removed on lock server</li>\n</ul>\n</li>\n<li>If a transaction aborts\n<ul>\n<li>new page is freed (for reuse)</li>\n<li>lock is removed from server</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"persistent-object-model\">Persistent Object Model</h2>\n<ul>\n<li>Language independent</li>\n<li>Persistence by inheritance</li>\n<li>Base types\n<ul>\n<li>numeric: sbyte, short, int, long, byte, ushort, uint, ulong, float, double</li>\n<li>string: ASCII (8-bit), UTF8, UTF16</li>\n<li>boolean</li>\n<li>date/time</li>\n</ul>\n</li>\n<li>Complex types\n<ul>\n<li>embedded: stored as part of parent object</li>\n<li>referece: parent object stores object identifier</li>\n<li>enumeration</li>\n<li>arrays (fixed and variable-length)</li>\n</ul>\n</li>\n<li>Relationships</li>\n<li>Collections</li>\n</ul>\n<h2 id=\"relationships-1\">Relationships</h2>\n<ul>\n<li>between objects declared in classes\n<ul>\n<li>unary and binary</li>\n<li>to-one and to-many</li>\n</ul>\n</li>\n<li>Storage and management of relationships\n<ul>\n<li>inline</li>\n<li>non-inline</li>\n<li>binary associations represented as separate construct internally</li>\n</ul>\n</li>\n<li>Consistency of relationships\n<ul>\n<li>referential integrity</li>\n<li>inverse relationship of binary relationship is updated automatically</li>\n<li>objects are removed from all relationships when deleted</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"non-inline-relationships-default\">Non-Inline Relationships (default)</h3>\n<ul>\n<li>Each object with relationships has a default relationship array\n<ul>\n<li>all non-inline relationships are stored in that array</li>\n</ul>\n</li>\n<li>Each relationship in the array is identified by\n<ul>\n<li>relationship name (id, not string)</li>\n<li>object id (ODI) of related object</li>\n</ul>\n</li>\n<li>Objectivity traverses relationships until it locates the desired relationship</li>\n<li>array is like part of an adjacent matrix</li>\n</ul>\n<h3 id=\"inline-relationships\">Inline Relationships</h3>\n<ul>\n<li>To-one inline relationships: embedded as fields of an object</li>\n<li>To-many inline relationships: placed in their own array</li>\n</ul>\n<h2 id=\"deletion-and-lock-propagation\">Deletion and Lock Propagation</h2>\n<ul>\n<li>Relationshis can have semantics</li>\n<li>Deletion propagation\n<ul>\n<li>if object is deleted all associated objects are deleted</li>\n</ul>\n</li>\n<li>Lock propagation\n<ul>\n<li>if object is locked all associated objects are locked</li>\n</ul>\n</li>\n<li>Developer specifies operation and direction of propagation</li>\n</ul>\n<h2 id=\"copy-and-versioning-behaviour\">Copy and Versioning Behaviour</h2>\n<ul>\n<li>Policies define what happens to object relationships when a copy or a new version of an object is made\n<ul>\n<li>copy: old an new object associated with same objects</li>\n<li>drop: only old object is associated with other objects</li>\n<li>move: only new object is associated with other objects</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"domain-classes\">Domain Classes</h2>\n<ul>\n<li>.NET partial classes to separate app and persistence code</li>\n<li>Persistence by inheritance\n<ul>\n<li>both partial classes inherit form <code class=\"language-text\">ReferenceableObject</code></li>\n</ul>\n</li>\n<li>Persistence code class\n<ul>\n<li>defines schema class and attributes</li>\n<li>functionality to create and dispose objects</li>\n<li>properties for attributes defined by schema</li>\n<li>proxy cache for each relationship</li>\n<li>helper and utility functionality</li>\n</ul>\n</li>\n<li>App code class contains user-defined code</li>\n</ul>\n<h2 id=\"connection-sessions-and-threads\">Connection, Sessions and Threads</h2>\n<ul>\n<li>Static funtions for startup, shutdown and connection</li>\n<li>One connection to federation per application process</li>\n<li>Seesions\n<ul>\n<li>manage resources (cache, transaction state …)</li>\n<li>one or many per thread or</li>\n<li>one shared by many threads</li>\n</ul>\n</li>\n<li>Cache\n<ul>\n<li>remains intact through commits and checkpoints</li>\n<li>flushed if transaction aborted</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"persistent-collections\">Persistent Collections</h2>\n<ul>\n<li>Built-in persistent collections: sets, lists and maps\n<ul>\n<li>automatically persistent (when created)</li>\n<li>conform to <code class=\"language-text\">System.Collections.Generic</code> interface</li>\n</ul>\n</li>\n<li>Types of persistent collections\n<ul>\n<li>ordered vs. unordered</li>\n<li>scalable vs.non-scalabse</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"iterators\">Iterators</h2>\n<ul>\n<li>Iterators are transient\n<ul>\n<li>provide access to persistent objects</li>\n</ul>\n</li>\n<li>Predicates can be supplied to iterators\n<ul>\n<li>no (or less) <code class=\"language-text\">if</code>s in loop</li>\n</ul>\n</li>\n<li>Not an efficient method for looking up objects\n<ul>\n<li>predicates evaluated on client (unless index is available)</li>\n<li>can be improved with indexes and scoping</li>\n</ul>\n</li>\n<li>Result is not built entirely before it is returned\n<ul>\n<li>clients can start process result (instead of getting blockes)</li>\n<li>sorting of result is not possible</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"scope-names\">Scope Names</h2>\n<ul>\n<li>Generalization of DB roots</li>\n<li>Unique name</li>\n<li>Possible on each storage level\n<ul>\n<li>container</li>\n<li>database</li>\n<li>federation</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"retrieving-objects-1\">Retrieving Objects</h2>\n<p>-Scope names</p>\n<ul>\n<li>Creating links (and following them)</li>\n<li>Individual and group lookup\n<ul>\n<li>keys</li>\n<li>iteratos</li>\n</ul>\n</li>\n<li>Parallel query\n<ul>\n<li>Parallel Query Engine</li>\n<li>divides query among several servers</li>\n</ul>\n</li>\n<li>Content-based filtering\n<ul>\n<li>predicate-query language</li>\n<li>used to follow to-many relationships</li>\n<li>used in parallel queries</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"linq-overview\">LINQ Overview</h2>\n<ul>\n<li>Part of .NEW (<code class=\"language-text\">System.Linq</code>)</li>\n<li>add native query capabilities to .NET languages</li>\n<li>Standard query operators defined by class <code class=\"language-text\">Enumerable</code></li>\n<li>Language extensions are translated into method calls</li>\n<li>Static safety</li>\n</ul>\n<!-- End Notes/Slides Week 9 -->\n<!-- Start Slides/Notes Week 10 -->\n<h1 id=\"graph-databases\">Graph Databases</h1>\n<ul>\n<li>Domain specific solution\n<ul>\n<li>for a group of problems</li>\n<li>a kind of solution for a kind of problems</li>\n</ul>\n</li>\n<li>Technology models (describe the world):\n<ol>\n<li>Key-Value Map</li>\n<li>Relational Model</li>\n<li>OO Model</li>\n</ol>\n</li>\n<li>Mapping between models</li>\n<li>There is no generic model for all domains</li>\n</ul>\n<h2 id=\"social-network-analysis\">Social Network Analysis</h2>\n<ul>\n<li>People are connected to each other</li>\n<li>Networks may be represented as graphs\n<ul>\n<li>Nodes: peoples</li>\n<li>Edges: relationships</li>\n</ul>\n</li>\n<li><a href=\"http://www.orgnet.com/sna.html\">Social Network Analysis</a> to gather information</li>\n</ul>\n<h2 id=\"graphs\">Graphs</h2>\n<ul>\n<li>Nodes and Edges may have attributes\n<ul>\n<li>Often key-value pairs</li>\n</ul>\n</li>\n<li>Graph algorithms can compute different values</li>\n<li>Connections vary:\n<ul>\n<li>Uni- / Bidirectional connections</li>\n<li>Nodes with single / multiple connections</li>\n<li>Multiple connections with different attribute</li>\n<li>Explicit / implicit connections</li>\n<li>Transient / long lasting connections</li>\n<li>One-time / repeated connections\n<ul>\n<li>regular / irregular connections</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"graph-metrics\">Graph Metrics</h3>\n<h4 id=\"path-lengths\">Path Lengths</h4>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Dunbar%27s_number\">Dunbar’s number</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Erd%C5%91s_number\">Erdős number</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Six_Degrees_of_Kevin_Bacon\">Bacon’s number</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Small-world_experiment\">Small world phenomenon</a></li>\n</ul>\n<h4 id=\"node-properties\">Node Properties</h4>\n<ul>\n<li>Degree Centrality\n<ul>\n<li>The number of direct connections a node has</li>\n</ul>\n</li>\n<li>Betweenness Centrality (Bridge)\n<ul>\n<li>A node is <em>between</em> two important nodes</li>\n<li>has great influence what flows in the network</li>\n</ul>\n</li>\n<li>Closeness Centrality\n<ul>\n<li>A node has the shortest path to all others</li>\n<li>good position to monitor information flow in network</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"network-structure-properties\">Network Structure Properties</h4>\n<ul>\n<li>Network Centralization\n<ul>\n<li>Dominated by one or few nodes</li>\n<li>(single) point of failure</li>\n</ul>\n</li>\n<li>Density/Cohesion\n<ul>\n<li>Proposition of direct connections relative to all possible connections</li>\n</ul>\n</li>\n<li>Distance (Small World)\n<ul>\n<li>Minimum numbers of edges needed to connect two particular nodes</li>\n</ul>\n</li>\n<li>Clustering Coefficients\n<ul>\n<li>Likelihood that two associates of a node are also associates to each other</li>\n<li>‘cliquishness’</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"general-model\">General Model</h3>\n<ul>\n<li>Common representation</li>\n<li>Uniform graph representation\n<ul>\n<li>needed to apply algorithms</li>\n</ul>\n</li>\n<li>Always <em>2</em> core <em>identities</em> connected by <em>action</em></li>\n<li>e.g.\n<ul>\n<li>connect 2 authors that worked on same publication</li>\n<li>or connect publications that have the same author</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"graph-database-implementations\">Graph Database Implementations</h2>\n<ul>\n<li>API</li>\n<li>Support for CRUD</li>\n<li>High-level operations for graph traversals</li>\n<li>Sometimes graph algorithms part of DB</li>\n<li>ACID</li>\n<li>Scalable</li>\n<li>Examples:\n<ul>\n<li>Objectivity InfiniteGraph</li>\n<li>Neo4j</li>\n<li>OrientDB</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"infinitegraph-objectivity\">InfiniteGraph (Objectivity)</h3>\n<ul>\n<li>Graph library on top of Objectivity/DB</li>\n<li>Distributed graph DB</li>\n<li>Classes for Vertex and Edge are predefined and persistent capable\n<ul>\n<li><code class=\"language-text\">BaseVertex</code></li>\n<li><code class=\"language-text\">BaseEdge</code></li>\n</ul>\n</li>\n<li>DB API extended with graph methods</li>\n<li>Traversing/Querying the graph: Navigator Engine\n<ol>\n<li>Put the current path from here</li>\n<li>Follow path from here</li>\n<li>if yes: which path to follow</li>\n</ol>\n</li>\n<li>Interfaces for Navigator Engine\n<ul>\n<li>Path Guide (path to go next)</li>\n<li>Path Qualifier (terminate current path?)</li>\n<li>Result Qualifier (put path in result set?)</li>\n<li>Result handler is called after navigation on result set</li>\n</ul>\n</li>\n<li>Properties of the Navigator Engine\n<ul>\n<li>not declarative</li>\n<li>interfaces to implement</li>\n<li>some predefined queries available</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"neo4j\">Neo4j</h3>\n<ul>\n<li>\n<p><a href=\"https://neo4j.com/\">Open Source DB</a> for Java</p>\n</li>\n<li>\n<p>Distinction between marking transaction and finishing (committing)</p>\n</li>\n<li>\n<p>Only generic node class available</p>\n<ul>\n<li>Generic Node (<code class=\"language-text\">GraphDatabaseService.createNode()</code>)</li>\n<li>Generic Edge (<code class=\"language-text\">Node.createRelationshipTo(...)</code>)</li>\n<li>set properties as key-values (<code class=\"language-text\">setProperty(...)</code>)</li>\n</ul>\n</li>\n<li>\n<p>Generic nodes can be integrated into Java classes (different use of nodes)</p>\n</li>\n<li>\n<p>Graph Traversal</p>\n<ul>\n<li>using <a href=\"https://en.wikipedia.org/wiki/Fluent_interface\">fluent interface</a> (chaining method calls)</li>\n<li>Provides special methods for\n<ul>\n<li><code class=\"language-text\">breadthFirst()</code> or <code class=\"language-text\">depthFirst()</code></li>\n<li><code class=\"language-text\">evaluator(Evaluator)</code>\n<ul>\n<li>Continue from here?</li>\n<li>Put node/path in result?</li>\n</ul>\n</li>\n<li>Relationships to follow (<code class=\"language-text\">relationships(RelationShipType, Direction)</code>)</li>\n</ul>\n</li>\n<li>all these methods return a <code class=\"language-text\">TraversalDescription</code> object, supports chaining</li>\n<li>evaluator looks at a Path object\n<ul>\n<li>decides if it should be in the result</li>\n<li>decides if the traverser should continue actual path</li>\n<li>Method to be implemented: <code class=\"language-text\">Evaluation evaluate(Path path)</code></li>\n<li>return value:\n<ul>\n<li><code class=\"language-text\">EXCLUDE_AND_CONTINUE</code></li>\n<li><code class=\"language-text\">EXCLUDE_AND_PRUNE</code></li>\n<li><code class=\"language-text\">INCLUDE_AND_CONTINUE</code></li>\n<li><code class=\"language-text\">INCLUDE_AND_PRUNE</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Iterator over result set</li>\n<li>Not declarative</li>\n</ul>\n</li>\n<li>\n<p>Graph algorithms</p>\n<ul>\n<li>find all paths between two nodes</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm\">Dijktra-based cheapest path</a></li>\n<li>Paths with given length</li>\n<li>Shortest paths</li>\n</ul>\n</li>\n<li>\n<p>REST API</p>\n<ul>\n<li>Management (CRUD) of nodes and edges\n<ul>\n<li>GET/POST</li>\n<li>JSON in-/output</li>\n</ul>\n</li>\n<li>Graph traversals</li>\n<li>Graph algorithms</li>\n</ul>\n</li>\n<li>\n<p>Query language: Cypher</p>\n<ul>\n<li>Declarative</li>\n<li>pattern matching</li>\n<li>supports update operations</li>\n<li>ASCII art</li>\n<li><a href=\"http://console.neo4j.org/\">try it online</a></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"comparison-between-infinitegraph-and-neo4j\">Comparison between InfiniteGraph and Neo4j</h3>\n<table>\n<thead>\n<tr>\n<th>Infinite Graph (Objectivity)</th>\n<th>Neo4j</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><em>no</em> database orthogonality</td>\n<td>partly data-type orthogonality (<code class=\"language-text\">RelationshipTypes</code> need to be implemented)</td>\n</tr>\n<tr>\n<td>independence (persistence orthogonality)</td>\n<td>(no) independence (persistence orthogonality)</td>\n</tr>\n<tr>\n<td>Extend <code class=\"language-text\">BaseVertex</code> and <code class=\"language-text\">BaseEdge</code></td>\n<td>Only generic nodes and edges available</td>\n</tr>\n<tr>\n<td>Navigation with implementation of interfaces (Qualifiers)</td>\n<td>Navigation with fluent interface (chaining)</td>\n</tr>\n<tr>\n<td>Navigation not declarative</td>\n<td>Navigation not declarative</td>\n</tr>\n<tr>\n<td>Part of Objectivity (object database)</td>\n<td>Some graph algorithms included</td>\n</tr>\n<tr>\n<td></td>\n<td>REST API: CRUD, JSON, algorithms</td>\n</tr>\n<tr>\n<td></td>\n<td>Cypher: ASCII Art, declarative query language</td>\n</tr>\n</tbody>\n</table>\n<!-- End Slides/Notes Week 10 -->\n<!-- Start Slides/Notes Week 11 -->\n<h1 id=\"version-models\">Version Models</h1>\n<ul>\n<li>Various models proposed\n<ul>\n<li>temporal DBs</li>\n<li>CAD/CAM</li>\n<li>SW configuration and engineering environments</li>\n</ul>\n</li>\n<li>Some object-oriented DBs provide versioning</li>\n</ul>\n<p>Comparison:</p>\n<ul>\n<li>Version Control Systems: unstructured data</li>\n<li>Versioning DBs: structured data</li>\n</ul>\n<h2 id=\"versioned-object\">Versioned Object</h2>\n<ul>\n<li>Concept with number of states</li>\n<li>Different levels of granularity\n<ul>\n<li>entire files</li>\n<li>tuples of relation</li>\n<li>attributes of a class</li>\n<li>objects in OOP system</li>\n</ul>\n</li>\n<li>Each version is a possible representation of the object\n<ul>\n<li>corresponding directly to one of its states</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"version-organsiations\">Version Organsiations</h2>\n<ul>\n<li>Relations between version\n<ul>\n<li>not related (set)</li>\n<li>linerar versioning (time, list)</li>\n<li>trees (branches)</li>\n<li>DAG (merging)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"references\">References</h2>\n<ul>\n<li>Specific reference\n<ul>\n<li>references single version of object directly</li>\n</ul>\n</li>\n<li>Generic reference\n<ul>\n<li>references entire object</li>\n<li>has to be dereferenced to a version when traversed</li>\n</ul>\n</li>\n<li>default version\n<ul>\n<li>it’s not always clear which version is the default one (e.g. DAG)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"storage-strategies\">Storage Strategies</h2>\n<ul>\n<li>Representing versions at physical level\n<ul>\n<li>store complete versions of objects</li>\n<li>store changes (deltas) between versions</li>\n</ul>\n</li>\n<li>Delta-based approaches\n<ul>\n<li>forward or backward deltas</li>\n<li>state-based or operation-based delta</li>\n</ul>\n</li>\n<li>Different strategies have different perfomance\n<ul>\n<li>storage vs. retrieval</li>\n<li>space vs. time</li>\n<li>…</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"operation-and-interaction-models\">Operation and Interaction Models</h2>\n<ul>\n<li>Operations\n<ul>\n<li>Control evolution of versions (of single objects)</li>\n<li>create new version</li>\n<li>branch a parallel version</li>\n<li>merge two parallel versions</li>\n<li>delete a version</li>\n</ul>\n</li>\n<li>Interaction or transactions models\n<ul>\n<li>working with complex objects and object graphs</li>\n<li>automatic versioning transparent to user</li>\n<li>library model uses check-out and check-in operations</li>\n<li>long running and nested transactions</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"queries-and-configurations\">Queries and Configurations</h2>\n<ul>\n<li>additional constraint to seletc correct representations (versions)</li>\n<li>various implementations\n<ul>\n<li>configurator evaluates rules against versioned objects</li>\n<li>declarative queries express constraints in extended language</li>\n<li>logical (based on feature logic)</li>\n</ul>\n</li>\n<li>Dereferencing of generic references\n<ul>\n<li>query evaluator needs to select specific version</li>\n<li>access for parallel versions</li>\n<li>access for sequencial versions</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"temporal-databases\">Temporal Databases</h2>\n<ul>\n<li>one of the first application domains for version models</li>\n<li>manage different time-dependent data</li>\n<li>field of research</li>\n<li>numerous approaches</li>\n<li>mostly based on relational DBs</li>\n</ul>\n<h2 id=\"time-in-databases\">Time in Databases</h2>\n<ul>\n<li>does time stored in a DB represent\n<ul>\n<li>time in the domain (e.g. event schedule)?</li>\n<li>time of DB operation (e.g. insertion, update)?</li>\n<li>can the time be <em>arbitrary modified</em>?</li>\n<li>is the time value provided by app or DB?</li>\n<li>…</li>\n</ul>\n</li>\n<li>different types of time to characterise temporal data\n<ul>\n<li>Transaction, Registration or Physical time\n<ul>\n<li>transaction or registration time</li>\n<li>captures when values were stored in DB</li>\n<li><code class=\"language-text\">AS-OF</code> operation</li>\n</ul>\n</li>\n<li>Valid or logical time\n<ul>\n<li>real-world time</li>\n<li>used to express when values existed in <em>real world</em></li>\n<li><code class=\"language-text\">WHEN</code> operation</li>\n</ul>\n</li>\n<li>Bitemporal: combination of physical and logical time</li>\n<li>User-defined time\n<ul>\n<li>all other aspects of time</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"classification-of-temporal-databases\">Classification of Temporal Databases</h2>\n<ul>\n<li>Static or snapshot DB\n<ul>\n<li>conventional DB</li>\n<li>does not manage temporal data</li>\n<li>supports only one single version</li>\n<li>if value is updated, previous value is lost</li>\n</ul>\n</li>\n<li>Static roll-back DB\n<ul>\n<li>like version control system (more or less)</li>\n<li>changes can be made only on actual version\n<ul>\n<li>errors in older versions can’t be fixed</li>\n</ul>\n</li>\n<li>keeps track of transaction time</li>\n<li>supports <code class=\"language-text\">AS-OF</code> operation</li>\n<li>no way to correct an error</li>\n<li>space or computation overhead (destructive vs. non-destructive)</li>\n</ul>\n</li>\n<li>Historical DB\n<ul>\n<li>keeps track of <em>valid time</em></li>\n<li>supports <code class=\"language-text\">WHEN</code></li>\n<li>changes can be made to previous values</li>\n</ul>\n</li>\n<li>Temporal DB\n<ul>\n<li>bi-temporal</li>\n<li>keept track of <em>transaction</em> and <em>valid</em> time</li>\n<li>supports <code class=\"language-text\">AS-OF</code> and <code class=\"language-text\">WHEN</code> operations</li>\n</ul>\n</li>\n<li>Spatio-Temporal DB\n<ul>\n<li>DB for moving objects</li>\n<li>continuous update of location</li>\n<li>uncertainty of location value</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"querying-moving-objects-with-uncertainity\">Querying Moving Objects with Uncertainity</h3>\n<ul>\n<li>\n<p>Point Queries</p>\n<ul>\n<li>operators over singel trajectory\n<ul>\n<li><code class=\"language-text\">Where_At(trajectory T, time t)</code>: expected location on route <code class=\"language-text\">T</code> at time <code class=\"language-text\">t</code></li>\n<li><code class=\"language-text\">When_At(trajectory T, location l)</code>: times object expected to be at location <code class=\"language-text\">l</code> on <code class=\"language-text\">T</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>Spatio-Temporal Range Queries</p>\n<ul>\n<li>set of <em>6 boolean predicates</em></li>\n<li>give <em>qualitative</em> description of relative position</li>\n</ul>\n</li>\n<li>\n<p>location changes continuously: condition satisfied <em>sometime</em> or <em>always</em> within <span class=\"math math-inline\"><span class=\"katex\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><msub><mi>t</mi><mi>b</mi></msub><mo separator=\"true\">,</mo><msub><mi>t</mi><mi>e</mi></msub><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[t_b,t_e]</annotation></semantics></math></span></span></p>\n</li>\n<li>\n<p>due to uncerainty: condition satisfied <em>possibly</em> or <em>definitely</em> at point <span class=\"math math-inline\"><span class=\"katex\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><msub><mi>t</mi><mi>b</mi></msub><mo separator=\"true\">,</mo><msub><mi>t</mi><mi>e</mi></msub><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">p \\in [t_b,t_e]</annotation></semantics></math></span></span></p>\n</li>\n<li>\n<p><em>possibly</em>: trajectory with uncretainity</p>\n</li>\n<li>\n<p><em>sometime</em>: don’t care about time</p>\n</li>\n</ul>\n<p>Leads to 8 possible operators</p>\n<ol>\n<li><code class=\"language-text\">Possibly_Sometime_Inside( T, R, tb te)</code></li>\n<li><code class=\"language-text\">Sometime_Possibly_Inside ( T, R, tb, te)</code></li>\n<li><code class=\"language-text\">Possibly_Always_Inside( T, R, tb, te)</code></li>\n<li><code class=\"language-text\">Always_Possibly_Inside( T, R, tb, te)</code></li>\n<li><code class=\"language-text\">Definitely_Always_Inside( T, R, tb, te)</code></li>\n<li><code class=\"language-text\">Always_Definitely_Inside( T, R, tb, te)</code></li>\n<li><code class=\"language-text\">Definitely_Sometime_Inside( T, R, tb, te)</code></li>\n<li><code class=\"language-text\">Sometime_Definitely_Inside( T, R, tb, te)</code></li>\n</ol>\n<p>Some of them are semantically equivalent</p>\n<h2 id=\"representing-temporal-data\">Representing Temporal Data</h2>\n<ul>\n<li>Tuple Versioning\n<ul>\n<li>tuple is extended with attribute for temporal dimension</li>\n<li>can be realised without violating <em>relational first normal form</em></li>\n</ul>\n</li>\n</ul>\n<p>Example:</p>\n<table>\n<thead>\n<tr>\n<th>Employee</th>\n<th>Office</th>\n<th>Salary</th>\n<th>TS</th>\n<th>TE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Anne</td>\n<td>A12</td>\n<td>5500</td>\n<td>2000</td>\n<td>now</td>\n</tr>\n<tr>\n<td>Bob</td>\n<td>B 34</td>\n<td>4000</td>\n<td>2002</td>\n<td>2003</td>\n</tr>\n<tr>\n<td>Bob</td>\n<td>B 34</td>\n<td>5500</td>\n<td>2003</td>\n<td>now</td>\n</tr>\n<tr>\n<td>Charles</td>\n<td>C 56</td>\n<td>6700</td>\n<td>1995</td>\n<td>2000</td>\n</tr>\n<tr>\n<td>Charles</td>\n<td>C 56</td>\n<td>7500</td>\n<td>2000</td>\n<td>2006</td>\n</tr>\n<tr>\n<td>Charles</td>\n<td>C 56</td>\n<td>7000</td>\n<td>2006</td>\n<td>now</td>\n</tr>\n<tr>\n<td>Denise</td>\n<td>B 34</td>\n<td>3000</td>\n<td>1990</td>\n<td>1995</td>\n</tr>\n<tr>\n<td>Denise</td>\n<td>B 34</td>\n<td>5300</td>\n<td>1995</td>\n<td>2002</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>Attribute Versioning\n<ul>\n<li>each attribute is extended with temporal information</li>\n<li>requires non-first normal form <span class=\"math math-inline\"><span class=\"katex\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi><msup><mi>F</mi><mn>3</mn></msup></mrow><annotation encoding=\"application/x-tex\">NF^3</annotation></semantics></math></span></span> relational systems</li>\n</ul>\n</li>\n</ul>\n<p>Example:</p>\n<table>\n<thead>\n<tr>\n<th>Employee</th>\n<th>Office</th>\n<th>Salary</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Anne</td>\n<td>A12</td>\n<td>(5500, 2000, now)</td>\n</tr>\n<tr>\n<td>Bob</td>\n<td>B 34</td>\n<td>(4000, 2002, 2003) (5500, 2003, now)</td>\n</tr>\n<tr>\n<td>Charles</td>\n<td>C 56</td>\n<td>(6700, 1995, 2000) (7500, 2000, 2006) (7000, 2006, now)</td>\n</tr>\n<tr>\n<td>Denise</td>\n<td>B 34</td>\n<td>(3000, 1990, 1995) (5300, 1995, 2002)</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"conceptual-and-data-models\">Conceptual and Data Models</h2>\n<ul>\n<li>Early models: extend relational of E/R model</li>\n<li>Bitemporal Conceptual Data Model (BCDM)\n<ul>\n<li>tuple versioning</li>\n<li>using <em>4</em> additional columns per tuple</li>\n<li><em>transation time</em> and <em>valid time</em>\n<ul>\n<li>special ‘until changed’ and ‘now’ values indicate if a tuple is current</li>\n</ul>\n</li>\n<li>query language TSQL2\n<ul>\n<li>extension of SQL</li>\n<li>introduces <code class=\"language-text\">VALIDTIME</code> and <code class=\"language-text\">WHEN</code> clause</li>\n<li>integrated into SQL3 as SQL/Temporal</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"homogeneous-and-heterogenous-models\">Homogeneous and Heterogenous Models</h2>\n<ul>\n<li>homogenous if temporal domain does not vary from one attribute to another\n<ul>\n<li>all models that use tuple versioning are homogenous</li>\n</ul>\n</li>\n<li>heterogenous if attributes of a tuple associated to different times</li>\n</ul>\n<h2 id=\"storage-models\">Storage Models</h2>\n<ul>\n<li>Temporal relation as 3-dimensional data structure\n<ul>\n<li>sequence of relations</li>\n<li>data cube</li>\n</ul>\n</li>\n<li>implemented using a two level store structure\n<ul>\n<li>primary store contains current versions\n<ul>\n<li>satisfy all non-temporal queries</li>\n</ul>\n</li>\n<li>history store hold in remaining history versions</li>\n</ul>\n</li>\n<li>traditional access methods cannot be used in such a storage model</li>\n<li>Two-level Storage Structures\n<ul>\n<li>Reverse Chaining</li>\n<li>Accession Lists</li>\n<li>Clustering</li>\n<li>Stacked Versions</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"engineering-databases\">Engineering Databases</h2>\n<ul>\n<li>Engineering application domains\n<ul>\n<li>Computer-Aided Design (CAD)</li>\n<li>Computer-Aided Manufacturing (CAM)</li>\n</ul>\n</li>\n<li>support development and maintenance of products</li>\n<li>Requirements\n<ul>\n<li>data structures</li>\n<li>concurrency control concepts</li>\n<li>define and manage complex (and hierarchical) design objects</li>\n<li>versionen support for complex objects</li>\n<li>iterative development</li>\n<li>alternatives and trial-and-error experiments</li>\n</ul>\n</li>\n<li>2-dimensional version models\n<ul>\n<li>linear revision dimension</li>\n<li>non-sequential variation dimension</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"design-space-version-model\">Design Space Version Model</h2>\n<ul>\n<li>Modeling primitives</li>\n<li>component hierarchies (<em>is-a-part-of</em>)</li>\n<li>version histories (<em>is-a-kind-of</em>, <em>is-derved-from</em>)</li>\n<li>configurations combine hierarchies and version histories</li>\n</ul>\n<h2 id=\"software-configuration-systems\">Software Configuration Systems</h2>\n<ul>\n<li>Developed for SW development</li>\n<li>SW Configuration Management (SCM)</li>\n<li>SW Engineering Environments (SEE)</li>\n<li>manage product directly</li>\n<li>fully automting process of building final product</li>\n<li>built around source files and program modules</li>\n<li>reference and dependencies management complex\n<ul>\n<li>hidden inside source code files</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"product-space-representation\">Product Space Representation</h2>\n<ul>\n<li>Data model with type relationships\n<ul>\n<li>composition tree with files as leaves</li>\n<li>dependencies are sepresented within tree</li>\n<li>build information can be computed from composition and dependency relationships</li>\n</ul>\n</li>\n<li>Without spanning tree\n<ul>\n<li>all files of one module are summarised as one object</li>\n<li>only source dependencies are represented</li>\n<li>directly corresponds to logical structure</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"version-space\">Version Space</h2>\n<ul>\n<li>Version model defines how objects are versioned\n<ul>\n<li>versioned object is container for set of object version</li>\n<li>common properties shared by all versions (invariants)</li>\n<li>differences (deltas) between versions\n<ul>\n<li>symmetric deltas</li>\n<li>directed deltas (changes)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Definition of version set\n<ul>\n<li><em>extentional</em> versioning enumerates all member of version set</li>\n<li><em>intentional</em> versioning uses predicate defining version set members</li>\n</ul>\n</li>\n<li>Evolution\n<ul>\n<li>revisions: track of history</li>\n<li>variants: alternatives</li>\n<li>can be used for cooperation and collaboration</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"version-space-representation\">Version Space Representation</h3>\n<ul>\n<li>One-level representation\n<ul>\n<li>Successor relationship (Sequence)</li>\n<li>Branch (Tree) and Merge (DAG)</li>\n</ul>\n</li>\n<li>Two-level representation\n<ul>\n<li>Revision</li>\n<li>Variants</li>\n</ul>\n</li>\n</ul>\n<!-- End Slides/Notes Week 11 -->\n<!-- Start Slides/Notes Week 12 -->\n<h1 id=\"indexing-1\">Indexing</h1>\n<p>Make OODBs faster and more performant</p>\n<ul>\n<li>Compare OOP model to Relational model</li>\n</ul>\n<p>Main differences between OOP and Relational model:</p>\n<ol>\n<li>inheritance (is-a)</li>\n<li>multitype attributes (sets, collections)\n<ul>\n<li>First normal form in Relational Databases disallows mutlivalued attributes (collections) in a field</li>\n</ul>\n</li>\n<li>dereferencing a path of pointers/references (traversing the object graph)</li>\n</ol>\n<blockquote>\n<p>OODB systems can be faster when using additional information that a RDBMSs doesn’t have</p>\n</blockquote>\n<p>Different approaches to:</p>\n<ul>\n<li>Mapping (ORM)</li>\n<li>Physically represent data differently (eg. Objectivity)</li>\n<li>Use additional (meta-) data but keep the representation of the data\n<ul>\n<li>secondary datastructures</li>\n<li>index structures</li>\n</ul>\n</li>\n<li>Group record: pages, clusters …</li>\n</ul>\n<h2 id=\"type-hierarchy-indexing\">Type Hierarchy Indexing</h2>\n<h3 id=\"key--vs-type-grouping\">Key- vs Type-Grouping</h3>\n<ul>\n<li>Key-Grouping\n<ul>\n<li>build index along the actual attribute value</li>\n<li>as <span class=\"math math-inline\"><span class=\"katex\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>B</mi><mo>+</mo></msup></mrow><annotation encoding=\"application/x-tex\">B^+</annotation></semantics></math></span></span>-trees</li>\n<li>additional information about typing and sub-typing in the leafs</li>\n</ul>\n</li>\n<li>Type-Grouping\n<ul>\n<li>index built along typing information</li>\n<li>values are secondary datastructure</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"extent-and-full-extent\">Extent and Full Extent</h3>\n<ul>\n<li>Extent: all objects of a given class (without sub-classes)</li>\n<li>Full Extent: all objects of a given class and it’s sub-classes</li>\n</ul>\n<h3 id=\"single-class-index-sc-index\">Single Class Index (SC-Index)</h3>\n<ul>\n<li>Index construction for attribute of a type <em>t</em>\n<ul>\n<li>incorporate only direct instances of a particular type in index</li>\n<li>construct search structure for all types in sub-hierarchy of t</li>\n<li>search data structures (called <em>SC-Index components</em>)</li>\n<li>Evaluator needs to traverse all components referenced by query</li>\n</ul>\n</li>\n<li>Usually implemented using <span class=\"math math-inline\"><span class=\"katex\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>B</mi><mo>+</mo></msup></mrow><annotation encoding=\"application/x-tex\">B^+</annotation></semantics></math></span></span>-trees</li>\n<li>Type-Grouping</li>\n</ul>\n<h3 id=\"class-hierarchy-index-ch-index\">Class Hierarchy Index (CH-Index)</h3>\n<ul>\n<li>One search structure for all objects of all types of indexed hierarchy</li>\n<li>One index on the common attribute for all classes of a inheritance graph</li>\n<li>Leaf node consists of\n<ul>\n<li>key-value</li>\n<li>key directory\n<ul>\n<li>contains an entry for each class that has instances with the key-value in the indexed attribute</li>\n<li>entry for a class consist of class identifier and offset for list of OIDs in index record</li>\n</ul>\n</li>\n<li>number of elements in list of OIDs (for each class in the inheritance graph)</li>\n<li>list of OIDs</li>\n</ul>\n</li>\n<li>Evaluator scans through <span class=\"math math-inline\"><span class=\"katex\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>B</mi><mo>+</mo></msup></mrow><annotation encoding=\"application/x-tex\">B^+</annotation></semantics></math></span></span>-tree once\n<ul>\n<li>selects OIDs f types referenced by query</li>\n<li>discards other OIDs</li>\n</ul>\n</li>\n<li>Point queries perform good</li>\n<li>Range queries depend on number of referenced types\n<ul>\n<li>good when queries aim at indexed type and all sub-types</li>\n<li>bad if only few types of indexed hierarchy hit by query</li>\n</ul>\n</li>\n<li>Key-grouping structure</li>\n</ul>\n<h3 id=\"h-tree\">H-Tree</h3>\n<ul>\n<li>\n<p>Set of nested <span class=\"math math-inline\"><span class=\"katex\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>B</mi><mo>+</mo></msup></mrow><annotation encoding=\"application/x-tex\">B^+</annotation></semantics></math></span></span>-trees</p>\n</li>\n<li>\n<p>Combining class hierarchy with SC-Index</p>\n</li>\n<li>\n<p>Nesting reflects indexed type hierarchy</p>\n<ul>\n<li>each H-tree component is nested with H-trees of immediate sub-types</li>\n<li>H-tree index for attribute of inheritance sub-graph is H-tree hierarchy nested according to super-type-sub-type relation</li>\n</ul>\n</li>\n<li>\n<p>Avoids full scans of each B-tree component when several types queried</p>\n</li>\n<li>\n<p>Single type look-up: don’t search nested trees</p>\n</li>\n<li>\n<p>Type hierarchy look-up: traverse nested trees</p>\n</li>\n<li>\n<p>Type-grouping structure</p>\n</li>\n</ul>\n<h3 id=\"class-division-index-cd-index\">Class Division Index (CD-Index)</h3>\n<ul>\n<li>Compromise between\n<ul>\n<li>indexing for each type</li>\n<li>indexing extent for each type</li>\n</ul>\n</li>\n<li>Specific family of type sets for indexed hierarchy</li>\n<li>Look at all possible combinations of full extends for all types</li>\n<li>Combine parts of sub-type hierarchies to use one index structure (like SC-index)</li>\n<li>Each typeset managed with search data structure</li>\n<li>Parameters <em>q</em> and <em>r</em> give bounds\n<ul>\n<li><em>q</em>: number of index structures needed to build a type extent</li>\n<li><em>r</em>: number of times a type set is managed redundantly or replicated</li>\n<li>big <em>q</em>: slow queries</li>\n<li>big <em>r</em>: slow updates</li>\n</ul>\n</li>\n<li>Multiple index structures need to be accessed for a query\n<ul>\n<li>trade-off between:\n<ul>\n<li>number of index structures to access for a query</li>\n<li>number of index structures to maintain</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Type-grouping structure</li>\n</ul>\n<h3 id=\"multi-key-type-index-mt-index\">Multi-Key Type Index (MT-Index)</h3>\n<ul>\n<li><em>Multi-Dimensional</em> indexing (locality)</li>\n<li>Type information as additional attribute available</li>\n<li>Compromise between\n<ul>\n<li>type grouping</li>\n<li>key grouping</li>\n</ul>\n</li>\n<li>Type membership as additional object attribute\n<ul>\n<li>symmetrical indexing of object types and attributes</li>\n<li>indexing of more than one attribute with single search structure</li>\n</ul>\n</li>\n<li>Linearization</li>\n<li>Key-grouping structure (type is handled as an attribute)</li>\n</ul>\n<h2 id=\"aggregation-path-indexing\">Aggregation Path Indexing</h2>\n<ul>\n<li>Backward queries\n<ul>\n<li>without full object tree traverses</li>\n</ul>\n</li>\n<li>Forward queries\n<ul>\n<li>without retrieving intermediate objects</li>\n<li>less hops to get to objects referenced over seversl levels</li>\n<li>shortcut forward</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"nested-index-nx\">Nested Index (NX)</h3>\n<ul>\n<li>Direct association between\n<ul>\n<li>an <em>ending</em> object and</li>\n<li>corresponding starting objects along a path</li>\n</ul>\n</li>\n<li>Bypassing intermediate objects</li>\n<li>Only allows backwards traversals of full path</li>\n<li>Equivalent to backward traversal in ASR canonical</li>\n<li>A Nested Index <em>NX(P)</em> for path <em>P</em> with length <em>1</em> is equivalent to a Multi-Index <em>MX(P)</em> for the same path</li>\n<li>Updating index structure is expensive</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 620px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/280379929988c926cf4bcab9c61ddbff/2a195/nested_index.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.21518987341772%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAhklEQVQY06WPOQ5DMQhEff+D2rhCfDPYoL8kMVKalHkFGhixlfsPynVdAMwMm7lJbWZzzq+VaWpVXWuV53l67yISEVkdY6yNiLh7RjNLy8zcnZkBfJoBMHNEiEitlYhyPxExc+/d3VW11tpaA+DuRBQRJa8HcBxH7j/PM7Wq5uhfa4zx/vkFS4og8S82X7IAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Nested Index\"\n        title=\"Nested Index\"\n        src=\"/static/280379929988c926cf4bcab9c61ddbff/2a195/nested_index.png\"\n        srcset=\"/static/280379929988c926cf4bcab9c61ddbff/c26ae/nested_index.png 158w,\n/static/280379929988c926cf4bcab9c61ddbff/6bdcf/nested_index.png 315w,\n/static/280379929988c926cf4bcab9c61ddbff/2a195/nested_index.png 620w\"\n        sizes=\"(max-width: 620px) 100vw, 620px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"path-index-px\">Path Index (PX)</h3>\n<ul>\n<li>Records all sub-paths leading to an ending object</li>\n<li>Predicates can be evaluated on all classes along the path</li>\n<li>Equivalent to backwards traversal of right-complete ASR</li>\n<li>A Path-Index <em>PX(P)</em> for path <em>P</em> with length <em>1</em> is equivalent to Multi-Index <em>MX(P)</em> an a Nested Index <em>NX(P)</em> for the same path</li>\n<li>Updating index structure better than with <em>NX</em></li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 560px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1dfbc6a1833a153ad657665a74af8c56/b06ae/path_index.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.810126582278485%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAu0lEQVQY043Q24rFIAwFUP//N1NowRpTraZeYoZT6aEPAzPrbROCO5pxE5H20nuXv4wxzNxMKeUHM8cY8eG9d85Za/ebtRYRj+MQEaOqrbUQgqrOFqoaQqi1fhshIjOn23meKSUi+iyLCBEBADPXWkWEmQFgjlWViJZlKaW01sYYOecYIxGVUkzOufc+39+2DQB+jbXWdV0BoLU2IyKa67r8bd9359y81ntvrX3H95SI5uWfDyuP2fP/8QfDk5PD5ZnfqAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Path Index\"\n        title=\"Path Index\"\n        src=\"/static/1dfbc6a1833a153ad657665a74af8c56/b06ae/path_index.png\"\n        srcset=\"/static/1dfbc6a1833a153ad657665a74af8c56/c26ae/path_index.png 158w,\n/static/1dfbc6a1833a153ad657665a74af8c56/6bdcf/path_index.png 315w,\n/static/1dfbc6a1833a153ad657665a74af8c56/b06ae/path_index.png 560w\"\n        sizes=\"(max-width: 560px) 100vw, 560px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"join-index-jx\">Join-Index (JX)</h3>\n<ul>\n<li>Originally for optimization of <em>joins</em> in Relational DBs</li>\n<li>Consists of a set of binary join indexes (Slides p. 33)</li>\n<li>Forward references are also indexed</li>\n<li>Cost compared to <em>MX</em> doubled</li>\n</ul>\n<h3 id=\"multi-index-mx\">Multi-Index (MX)</h3>\n<ul>\n<li>Like Join-Indexes in Relational DBs</li>\n<li>Divide path (of arbitrary length) into sub-paths\n<ul>\n<li>sub-paths have length <em>1</em></li>\n<li>index maintained over sub-paths</li>\n</ul>\n</li>\n<li>Query evaluation\n<ul>\n<li>concatenating <em>n</em> index edges requires <em>n</em> index scans</li>\n<li>supports backward traversals and queries</li>\n<li><em>no</em> forward traversals and queries</li>\n</ul>\n</li>\n<li>Each index enty is represented as a pair\n<ol>\n<li>A key-value</li>\n<li>set of OIDs of objects holding this key-value (for indexed attribute)</li>\n</ol>\n</li>\n<li>Updates cheap</li>\n<li>Complex queries expensive (hop over nodes)</li>\n<li>each reference in object has index structure for backward references</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 560px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3efdb3ce74d9a791707453f9f03ecc3b/b06ae/multi_index.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.810126582278485%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAArUlEQVQY042O4arDMAhG8/6vmUIKaa00TTUmxrFlvdxtMHZ+KOdDRdcf2CtvyefMSNxoqlovWmtm9j/5HHgum1lrDRGZ+bwopWzbRkRDc877vhNRznnU8YhTVUScpqmUIiJmlnOOMYYQxnkiAgDvvar23pk5pXQch4i48zzHnyISQvDev2mt1cxqrfM8/6mIAIBj5u3BsizruqaUAAARY4zf9b7cey8Xqmpmv+sNH+6WQgT+ug4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Multi Index\"\n        title=\"Multi Index\"\n        src=\"/static/3efdb3ce74d9a791707453f9f03ecc3b/b06ae/multi_index.png\"\n        srcset=\"/static/3efdb3ce74d9a791707453f9f03ecc3b/c26ae/multi_index.png 158w,\n/static/3efdb3ce74d9a791707453f9f03ecc3b/6bdcf/multi_index.png 315w,\n/static/3efdb3ce74d9a791707453f9f03ecc3b/b06ae/multi_index.png 560w\"\n        sizes=\"(max-width: 560px) 100vw, 560px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"access-support-relations-asr\">Access Support Relations (ASR)</h3>\n<ul>\n<li>Given a path create <em>4</em> index structures that support all desired queries (Nested Index, Path Index, Multi-Index)\n<ol>\n<li>Canonical representation</li>\n<li>Full representation</li>\n<li>Left representation</li>\n<li>Right representation</li>\n</ol>\n<ul>\n<li>Related to Relational DB Joins: canonical is like regular join in SQL</li>\n</ul>\n</li>\n<li>ASR Compositions Index Graph\n<ul>\n<li>Queries that do not traverse the path at either endpoint can’t be answered efficiently</li>\n<li>Aggregation path can be split in sub-paths (partitions)</li>\n<li>Set of partions: decompositions of an ASR</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"overview-aggregation-path-indexing\">Overview: Aggregation Path Indexing</h3>\n<ul>\n<li>Nested Index and Path Index implemented using\n<ul>\n<li>trees or</li>\n<li>hash tables</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"collection-operations\">Collection Operations</h2>\n<ul>\n<li>For: sets, bags, lists, arrays</li>\n<li>new modelling features, enhanced expressiveness</li>\n<li>increased complexity of indexing and query optimisation</li>\n<li>OQL provides constructors and operators for collections</li>\n</ul>\n<h3 id=\"signature-files\">Signature Files</h3>\n<ul>\n<li>Index construction for a multi-valued property of a type</li>\n<li>Query over multi-valued properties</li>\n<li>Compute signatures for attribute values, elements …</li>\n<li>Use mathematical operation\n<ul>\n<li>Super-set, sub-set …</li>\n<li>‘actual drop’: true positive</li>\n<li>‘false drop’: false positive</li>\n</ul>\n</li>\n</ul>\n<!-- End Slides/Notes Week 12 -->\n<!-- Start Slides Week 13 -->\n<h1 id=\"the-om-data-model\">The OM Data Model</h1>\n<ul>\n<li>Extended Entity-Relationship model</li>\n<li>for OOP data management</li>\n<li>special features\n<ul>\n<li>difference between typing and classification</li>\n<li>types (model):\n<ul>\n<li>names</li>\n<li>attributes</li>\n<li>behaviour</li>\n<li>relationships</li>\n</ul>\n</li>\n<li>objects: attributes and methods</li>\n<li>multiple inheritance, multiple instantiation (gain/lose roles), multiple classification</li>\n<li>collections as first-class concepts</li>\n<li>binary associations as first-class concepts</li>\n<li>constraints for integrity, classification and evolution</li>\n<li>data definition, manipulation and query language (OML)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"typing-and-classification\">Typing and Classification</h2>\n<table>\n<thead>\n<tr>\n<th>Typing</th>\n<th>Classification</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>static</td>\n<td>dynamic</td>\n</tr>\n<tr>\n<td>representation of entities</td>\n<td>roles of entities</td>\n</tr>\n<tr>\n<td>defines format of data values</td>\n<td>defines semantic groupings as collections of values</td>\n</tr>\n<tr>\n<td>defines operations</td>\n<td>defines constraits among collection</td>\n</tr>\n<tr>\n<td>defines inheritance properties</td>\n<td>Collections: member type</td>\n</tr>\n<tr>\n<td>‘Java’ classes</td>\n<td></td>\n</tr>\n<tr>\n<td>multiple inheritance/instantiation</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>better understanding of issues\n<ul>\n<li>important to recognise the two concepts</li>\n</ul>\n</li>\n<li>Reduces complexity of type graphs\n<ul>\n<li>no need to introduce subtypes to represent each classification</li>\n</ul>\n</li>\n<li>Rich classification structures</li>\n<li>Support for relationships between objects\n<ul>\n<li>accociation over collections instead embedded in objects</li>\n</ul>\n</li>\n<li>Integration of:\n<ul>\n<li>Database</li>\n<li>Programming Languages</li>\n</ul>\n</li>\n<li>Collections\n<ul>\n<li>semantic groupings of objects</li>\n</ul>\n</li>\n<li>Member types of collections\n<ul>\n<li>constrain membership in a collection</li>\n<li>can define a <em>view</em> of object accessed in <em>context</em> of collection</li>\n</ul>\n</li>\n<li>Object evolution\n<ul>\n<li>objects can gain/loose roles by being added or deleted form collections</li>\n<li>type change not always required (???) <!-- slides week 13 p.7 --></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"om-data-model-layers\">OM Data Model Layers</h2>\n<ul>\n<li>\n<p>OM distinguishes</p>\n<ul>\n<li>typing from</li>\n<li>classification</li>\n</ul>\n</li>\n<li>\n<p>Type-layer</p>\n<ul>\n<li>object representation\n<ul>\n<li>objects: type units</li>\n<li>can gain and lose types dynamically: dressing and stripping</li>\n</ul>\n</li>\n<li>multiple inheritance</li>\n<li>multiple instantiation\n<ul>\n<li>objects can have types from parallel inheritance hierarchies</li>\n<li>objects can have types that are completely unrelated</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>Classification-layer</p>\n<ul>\n<li>based on types from type layer</li>\n<li>semantic groupings: collections\n<ul>\n<li>membership constrained by type</li>\n<li>associations to link objects together</li>\n<li>kinds and roles</li>\n<li>constraints\n<ul>\n<li>subcollections and supercollections</li>\n<li>cardinality to describe associations</li>\n<li>evolution constraints</li>\n<li>…</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>multiple classification</li>\n<li>collections and associations</li>\n</ul>\n</li>\n<li>\n<p>Associations can be nested</p>\n<ul>\n<li>model n-ary relationships</li>\n<li>clearer semantics</li>\n<li>allow uniform query language</li>\n</ul>\n</li>\n<li>\n<p>Things that exist</p>\n<ul>\n<li>types</li>\n<li>values for attributes</li>\n</ul>\n</li>\n<li>\n<p>Collection is not just contains objects</p>\n<ul>\n<li>relationship to objects</li>\n<li>name</li>\n<li>constraint (subset relation)\n<ul>\n<li>joint</li>\n<li>disjoint</li>\n</ul>\n</li>\n<li>associations\n<ul>\n<li>collection to pairs</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>e.g: A person becomming a friend or an enemy doesn’t change (or add/remove) any properties of a person type</p>\n</li>\n<li>\n<p>Objects can gain state and behavior dynamically</p>\n<ul>\n<li>distinguish\n<ul>\n<li>object: can refer to, identity, can be pointed to</li>\n<li>instance: container of values of a particular type</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>Relationships</p>\n</li>\n<li>\n<p>intentional / extensional</p>\n</li>\n<li>\n<p>Query</p>\n<ul>\n<li>Decide if something in a collection or not</li>\n<li>Traversing result (iterator, cursor)</li>\n</ul>\n</li>\n<li>\n<p>SQL</p>\n<ul>\n<li>relationships mapped by primary-/foreign-key</li>\n<li><code class=\"language-text\">select</code> can be used instead of <code class=\"language-text\">joins</code> to follow relationships</li>\n<li>A selection query is fully specified when:\n<ul>\n<li>providing a <em>set of candidates</em> and</li>\n<li>a function that takes <em>individual candidates</em> and returns <em>true</em> or <em>false</em></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>OM Model queries</p>\n<ul>\n<li>Declaritive query language</li>\n<li>Collections are <em>sets of candidates</em> for queries</li>\n</ul>\n</li>\n<li>\n<p>Map-Reduce</p>\n</li>\n</ul>\n<h2 id=\"collection-constraint\">Collection Constraint</h2>\n<ul>\n<li>Disjoint: XOR</li>\n<li>Cover: OR</li>\n<li>Partition: one and only one needs to be true</li>\n</ul>\n<h2 id=\"associations-relationships\">Associations (Relationships)</h2>\n<ul>\n<li>binary relation between 2 collections</li>\n<li>cardinality</li>\n<li>tuple as type of collection</li>\n<li>can be nested: n-ary relationships</li>\n</ul>\n<!-- End Slides/Notes Week 13 -->\n<!-- Begin Slides/Notes Week 14 -->\n<h2 id=\"object-model-language-oml\">Object Model Language (OML)</h2>\n<ul>\n<li>Declarative OOP language for OM data model</li>\n<li>OML Data Definition Language\n<ul>\n<li>object and structured type definition</li>\n<li>method definition and emplementation</li>\n<li>collection, association and constraint definition</li>\n</ul>\n</li>\n<li>OML Data Manipulation Language\n<ul>\n<li>creating and updating objects</li>\n<li>ceate, update, delete, dress and strip operations</li>\n</ul>\n</li>\n<li>OML Query Language\n<ul>\n<li>expressions and functions for values of base types</li>\n<li>operations on objects\n<ul>\n<li>access attributes</li>\n<li>invoke methods</li>\n</ul>\n</li>\n<li>operations on collections (collection algebra)</li>\n</ul>\n</li>\n<li>map-reduce\n<ul>\n<li>very important operations after selection</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"collection-algebra\">Collection Algebra</h3>\n<ul>\n<li>Operations defined for collections of OM model\n<ul>\n<li>union</li>\n<li>intersections</li>\n<li>difference</li>\n<li>selection</li>\n<li>map\n<ul>\n<li>takes a set of objects and applies a function on <em>each object</em></li>\n<li>the result set has the same carinality</li>\n</ul>\n</li>\n<li>reduce\n<ul>\n<li>take a set of values (objects)</li>\n<li>return one value (object)</li>\n</ul>\n</li>\n<li>flatten</li>\n</ul>\n</li>\n<li>Sematics of operations depend on collection behaviour\n<ul>\n<li>set theory defines semantics</li>\n<li>generalisation for <em>bag</em>, <em>sequence</em> and <em>ranking</em></li>\n<li>mixing and converting collection types</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"binary-collections\">Binary Collections</h3>\n<ul>\n<li>All collections-operations can be applied to binary collection</li>\n<li>Binary collections suort additional operations\n<ul>\n<li>domain and range\n<ul>\n<li>not same as collection with tuple containing ‘range’ and ‘domain’</li>\n</ul>\n</li>\n<li>domain and range restriction (selection)</li>\n<li>subtraction</li>\n<li>inverse\n<ul>\n<li>swapping domain and range</li>\n</ul>\n</li>\n<li>nest\n<ul>\n<li>grouping of binary collections</li>\n</ul>\n</li>\n<li>compose\n<ul>\n<li>find associatd objects in DB it may be necessary to compose (<em>join</em>) associations</li>\n</ul>\n</li>\n<li>closure\n<ul>\n<li>repeatedly compose binary collection with itself</li>\n</ul>\n</li>\n<li>division\n<ul>\n<li>divide a binary collection with a unary collection</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<!-- End Slides/Notes Week 14 -->","frontmatter":{"title":"Object Databases","tags":["ETH","OOP"],"category":"Programming"},"headings":[{"depth":1,"value":"Motivation"},{"depth":2,"value":"Orthogonal Persistence"},{"depth":2,"value":"Impedance Missmatch"},{"depth":2,"value":"Relational Databases"},{"depth":2,"value":"Object-relational mapping (ORM)"},{"depth":2,"value":"Develop own Database"},{"depth":2,"value":"SQL"},{"depth":3,"value":"Data Definition Language (DDL)"},{"depth":3,"value":"Data Manipulation Language (DML)"},{"depth":3,"value":"Query Language (QL)"},{"depth":2,"value":"DDL, DML and QL in SQL and Java"},{"depth":2,"value":"Learning Goals"},{"depth":1,"value":"General Topics for DB’s"},{"depth":2,"value":"CRUD and ACID"},{"depth":1,"value":"ODMG Standard"},{"depth":2,"value":"Object Data Management Group (ODMG)"},{"depth":3,"value":"Object Model"},{"depth":4,"value":"Types"},{"depth":4,"value":"Type Specifications"},{"depth":4,"value":"Type Implementation"},{"depth":4,"value":"Subtyping and Inheritance"},{"depth":3,"value":"Object Query Language (OQL)"},{"depth":4,"value":"Difference to SQL"},{"depth":4,"value":"Return Types"},{"depth":4,"value":"Extents"},{"depth":3,"value":"Collections"},{"depth":4,"value":"Sub-collections"},{"depth":3,"value":"Relationships"},{"depth":3,"value":"Persistence"},{"depth":3,"value":"Other Concepts Supported"},{"depth":3,"value":"Object Definition Language (ODL)"},{"depth":3,"value":"Collection Expressions"},{"depth":3,"value":"Language Bindings"},{"depth":1,"value":"Hibernate"},{"depth":2,"value":"Object-Relational Mappings"},{"depth":2,"value":"Main Concepts"},{"depth":2,"value":"Configuration"},{"depth":3,"value":"Properties"},{"depth":3,"value":"Persistent Objects"},{"depth":2,"value":"Mapping Associations"},{"depth":2,"value":"Mapping Inheritance"},{"depth":2,"value":"Annotations"},{"depth":1,"value":"Google Android"},{"depth":2,"value":"Application component model"},{"depth":2,"value":"Data Management"},{"depth":1,"value":"Object-Oriented Databases: Object Database Manifesto"},{"depth":2,"value":"Objects (mandatory)"},{"depth":2,"value":"Types and Classes"},{"depth":2,"value":"Generalization Hierarchies"},{"depth":2,"value":"Durability and Efficiency"},{"depth":2,"value":"Concurrency Control and Recovery"},{"depth":2,"value":"Declarative Query Language"},{"depth":1,"value":"db4o"},{"depth":2,"value":"Object Container"},{"depth":2,"value":"Storing Objects"},{"depth":2,"value":"Retrieving Objects"},{"depth":3,"value":"SODA Queries"},{"depth":2,"value":"Updating Objects"},{"depth":2,"value":"Deleting Objects"},{"depth":2,"value":"Simple vs. Complex Objects"},{"depth":2,"value":"Simple Structured Objects"},{"depth":3,"value":"Updating Simple Structured Objects"},{"depth":3,"value":"Deleting Simple Structured Objects"},{"depth":2,"value":"Object Hierarchies"},{"depth":2,"value":"Transparent Persistence"},{"depth":2,"value":"Activation"},{"depth":3,"value":"Transparent Activation"},{"depth":2,"value":"db4o Transactions"},{"depth":2,"value":"Configuration"},{"depth":2,"value":"External tools"},{"depth":2,"value":"Indexes"},{"depth":2,"value":"Tuning for Speed"},{"depth":2,"value":"Distribution and Replication"},{"depth":2,"value":"Callbacks"},{"depth":2,"value":"Object Instantiation"},{"depth":1,"value":"Versant"},{"depth":2,"value":"Indexing"},{"depth":2,"value":"Architecture"},{"depth":2,"value":"Database Volumes"},{"depth":2,"value":"Versant Manager"},{"depth":2,"value":"Cache"},{"depth":2,"value":"Versant Server"},{"depth":2,"value":"Processes, Sessions and Transactions"},{"depth":2,"value":"Java Versant Interface"},{"depth":2,"value":"JVI Layers"},{"depth":3,"value":"Fundamental Layer"},{"depth":3,"value":"Transparent Layer"},{"depth":4,"value":"First and Second Class Objects"},{"depth":4,"value":"Persistence Categories"},{"depth":4,"value":"Persistence and Navigation"},{"depth":3,"value":"OMDG Layer"},{"depth":2,"value":"Application Development"},{"depth":2,"value":"Byte-code Enhancement"},{"depth":2,"value":"Object Lifecycle"},{"depth":2,"value":"Versant Collections"},{"depth":2,"value":"Versant Query Language (VQL)"},{"depth":2,"value":"Event Notification and Persistent Object Hooks"},{"depth":1,"value":"ObjectStore"},{"depth":2,"value":"General Topics of Persistence"},{"depth":2,"value":"Architecture"},{"depth":2,"value":"Virtual Memory Mapping Architecture"},{"depth":2,"value":"Server Side Components"},{"depth":2,"value":"Client Side Components"},{"depth":2,"value":"Fetching and Mapping Pages"},{"depth":3,"value":"Fetching and Mapping Sequence"},{"depth":2,"value":"Cache-Forward Architecture"},{"depth":2,"value":"Shared Virtual Memory"},{"depth":2,"value":"Page Permits and Locks"},{"depth":2,"value":"Distribution and Heterogeneity"},{"depth":2,"value":"Persistence"},{"depth":2,"value":"Transactions"},{"depth":3,"value":"Transaction Types"},{"depth":2,"value":"Database Layout"},{"depth":2,"value":"Developing Applications (API)"},{"depth":3,"value":"Managing Databases"},{"depth":3,"value":"Transactions"},{"depth":3,"value":"Creating Persistent Objects"},{"depth":3,"value":"Updating and Deleting Persistent Objects"},{"depth":3,"value":"Collections and Relationships"},{"depth":2,"value":"Database Roots"},{"depth":1,"value":"Objectivity/DB"},{"depth":2,"value":"Key Features"},{"depth":2,"value":"Architecture"},{"depth":2,"value":"Federation"},{"depth":2,"value":"Databases"},{"depth":2,"value":"Containers"},{"depth":2,"value":"Pages"},{"depth":3,"value":"Logical and Physical Pages"},{"depth":2,"value":"Persistent Object Model"},{"depth":2,"value":"Relationships"},{"depth":3,"value":"Non-Inline Relationships (default)"},{"depth":3,"value":"Inline Relationships"},{"depth":2,"value":"Deletion and Lock Propagation"},{"depth":2,"value":"Copy and Versioning Behaviour"},{"depth":2,"value":"Domain Classes"},{"depth":2,"value":"Connection, Sessions and Threads"},{"depth":2,"value":"Persistent Collections"},{"depth":2,"value":"Iterators"},{"depth":2,"value":"Scope Names"},{"depth":2,"value":"Retrieving Objects"},{"depth":2,"value":"LINQ Overview"},{"depth":1,"value":"Graph Databases"},{"depth":2,"value":"Social Network Analysis"},{"depth":2,"value":"Graphs"},{"depth":3,"value":"Graph Metrics"},{"depth":4,"value":"Path Lengths"},{"depth":4,"value":"Node Properties"},{"depth":4,"value":"Network Structure Properties"},{"depth":3,"value":"General Model"},{"depth":2,"value":"Graph Database Implementations"},{"depth":3,"value":"InfiniteGraph (Objectivity)"},{"depth":3,"value":"Neo4j"},{"depth":3,"value":"Comparison between InfiniteGraph and Neo4j"},{"depth":1,"value":"Version Models"},{"depth":2,"value":"Versioned Object"},{"depth":2,"value":"Version Organsiations"},{"depth":2,"value":"References"},{"depth":2,"value":"Storage Strategies"},{"depth":2,"value":"Operation and Interaction Models"},{"depth":2,"value":"Queries and Configurations"},{"depth":2,"value":"Temporal Databases"},{"depth":2,"value":"Time in Databases"},{"depth":2,"value":"Classification of Temporal Databases"},{"depth":3,"value":"Querying Moving Objects with Uncertainity"},{"depth":2,"value":"Representing Temporal Data"},{"depth":2,"value":"Conceptual and Data Models"},{"depth":2,"value":"Homogeneous and Heterogenous Models"},{"depth":2,"value":"Storage Models"},{"depth":2,"value":"Engineering Databases"},{"depth":2,"value":"Design Space Version Model"},{"depth":2,"value":"Software Configuration Systems"},{"depth":2,"value":"Product Space Representation"},{"depth":2,"value":"Version Space"},{"depth":3,"value":"Version Space Representation"},{"depth":1,"value":"Indexing"},{"depth":2,"value":"Type Hierarchy Indexing"},{"depth":3,"value":"Key- vs Type-Grouping"},{"depth":3,"value":"Extent and Full Extent"},{"depth":3,"value":"Single Class Index (SC-Index)"},{"depth":3,"value":"Class Hierarchy Index (CH-Index)"},{"depth":3,"value":"H-Tree"},{"depth":3,"value":"Class Division Index (CD-Index)"},{"depth":3,"value":"Multi-Key Type Index (MT-Index)"},{"depth":2,"value":"Aggregation Path Indexing"},{"depth":3,"value":"Nested Index (NX)"},{"depth":3,"value":"Path Index (PX)"},{"depth":3,"value":"Join-Index (JX)"},{"depth":3,"value":"Multi-Index (MX)"},{"depth":3,"value":"Access Support Relations (ASR)"},{"depth":3,"value":"Overview: Aggregation Path Indexing"},{"depth":2,"value":"Collection Operations"},{"depth":3,"value":"Signature Files"},{"depth":1,"value":"The OM Data Model"},{"depth":2,"value":"Typing and Classification"},{"depth":2,"value":"OM Data Model Layers"},{"depth":2,"value":"Collection Constraint"},{"depth":2,"value":"Associations (Relationships)"},{"depth":2,"value":"Object Model Language (OML)"},{"depth":3,"value":"Collection Algebra"},{"depth":3,"value":"Binary Collections"}]}},"pageContext":{"id":"77c93834-4632-5f26-a1a6-561bf78d3c6b","previousPost":{"title":"Synchronization Primitives (Read-Modify-Write)","slug":"/blog/rwm_operations"},"nextPost":{"title":"Files and File descriptors on Linux","slug":"/blog/files_linux"},"dates":{"created":1461155443,"modified":1647509701}}},
    "staticQueryHashes": []}